{"version":3,"sources":["assets/boxGame/script/BoxGameMain/BoxGameMainModel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,8EAA6E;AACvE,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C;IAA8C,oCAAW;IAAzD;QAAA,qEA4DC;QA1DG,gBAAgB;QACT,gBAAU,GAAG,eAAe,CAAC;QAE7B,aAAO,GAAW,4BAA4B,CAAA;;IAuDzD,CAAC;IAnDU,mCAAQ,GAAf;QACI,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,CAAC,CAAA;IACrF,CAAC;IAEM,mCAAQ,GAAf,UAAgB,CAAS,EAAE,QAAkB;QACzC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACb,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YAC7C,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAA;YAC/B,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,6BAA6B,GAAG,CAAC,CAAA;SACrD;QACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;IACxC,CAAC;IACM,oCAAS,GAAhB,UAAiB,GAAW,EAAE,QAAkB;QAC5C,OAAO;QACP,uCAAuC;QACvC,wCAAwC;IAC5C,CAAC;IAGM,kCAAO,GAAd,UAAe,GAAW,EAAE,OAAkB,EAAE,IAAU,EAAE,MAAsB;QAAtB,uBAAA,EAAA,cAAsB;QAC9E,OAAO,CAAC,KAAK,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC;QACnC,IAAI,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;QAC/B,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;QAC5B,QAAQ;QACR,GAAG,CAAC,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QACzD,GAAG,CAAC,MAAM,GAAG;YACT,IAAI,IAAI,CAAC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,GAAG,GAAG,EAAE;gBACzC,OAAO;gBACP,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;gBACvC,IAAI;oBACA,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;oBAC/C,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;iBAC3B;gBAAC,OAAO,KAAK,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;iBACzC;aACJ;iBAAM;gBACH,OAAO;gBACP,OAAO,CAAC,KAAK,CAAC,2BAA2B,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;aAC5D;QACL,CAAC,CAAC;QACF,GAAG,CAAC,OAAO,GAAG;YACV,OAAO;YACP,OAAO,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;QACnC,CAAC,CAAC;QACF,UAAU;QACV,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACnB,CAAC;IAvDgB,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CA4DpC;IAAD,uBAAC;CA5DD,AA4DC,CA5D6C,yBAAW,GA4DxD;kBA5DoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["\nimport { WebSocketClient } from '../WebSocketClient';\nimport { UIModelBase } from './../../../c2f-framework/gui/layer/UIModelBase';\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class BoxGameMainModel extends UIModelBase {\n\n    /** 预制名 给实例调用 */\n    public prefabName = 'F_BoxGameMain';\n    public wsUrl: string\n    public baseUrl: string = 'http://43.157.128.102:5501'\n    public accounts: string[]\n    public playerData: msgBoxGame.GW_Login\n    public client: WebSocketClient\n    public initData() {\n        this.accounts = [\"kstest001\", \"kstest002\", \"kstest003\", \"kstest004\", \"kstest005\"]\n    }\n\n    public getWsUrl(e: string, callback: Function) {\n        if (!this.wsUrl) {\n            var i = this.baseUrl.replace(\"http:\", \"ws:\");\n            i = i.replace(\"https:\", \"wss:\")\n            this.wsUrl = i + \"/hubs/chathub?access_token=\" + e\n        }\n        this.tcpConnet(this.wsUrl, callback)\n    }\n    public tcpConnet(url: string, callback: Function) {\n        // 使用示例\n        // this.client = new WebSocketClient();\n        // this.client.tcpConnet(url, callback);\n    }\n\n\n    public sendMsg(url: string, callFun?: Function, data?: any, method: string = 'GET') {\n        console.error('reqMsg   url', url);\n        var xhr = new XMLHttpRequest();\n        xhr.open(method, url, true);\n        // 设置请求头\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.onload = function () {\n            if (this.status >= 200 && this.status < 300) {\n                // 成功响应\n                console.log(\"成功相应\", this.responseText);\n                try {\n                    let jsonObject = JSON.parse(this.responseText);\n                    callFun(jsonObject.data)\n                } catch (error) {\n                    console.error('Invalid JSON:', error);\n                }\n            } else {\n                // 错误处理\n                console.error('Failed to load resource: ' + this.status);\n            }\n        };\n        xhr.onerror = function () {\n            // 网络错误\n            console.error('Network error');\n        };\n        // 发送请求体数据\n        xhr.send(data);\n    }\n\n\n\n\n}"]}