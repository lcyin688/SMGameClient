{"version":3,"sources":["assets/c2f-framework/component/shader/ShaderShining.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wDAAuD;AAEjD,IAAA,KAAmE,EAAE,CAAC,UAAU,EAA9E,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAA,EAAE,gBAAgB,sBAAA,EAAE,iBAAiB,uBAAkB,CAAC;AAMvF;IAA2C,iCAAY;IAAvD;QAAA,qEAkCC;QAhCU,WAAK,GAAW,CAAC,CAAC;QAElB,WAAK,GAAW,CAAC,CAAC;QAElB,SAAG,GAAW,IAAI,CAAC;QAEnB,cAAQ,GAAW,CAAC,CAAC;QAErB,cAAQ,GAAW,CAAC,CAAC;QAErB,eAAS,GAAY,KAAK,CAAC;QAE1B,UAAI,GAAgB,IAAI,CAAC;;IAoBrC,CAAC;IAnBG,sBAAW,8BAAG;aAAd;YACI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;aACpE;YACD,OAAO,IAAI,CAAC,IAAI,CAAC;QACrB,CAAC;;;OAAA;IAES,6BAAK,GAAf;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAES,8BAAM,GAAhB;QACI,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAEM,oCAAY,GAAnB;QACI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,aAAa,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QAClG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,qBAAS,CAAC,YAAY,CAAC,CAAC,CAAC,qBAAS,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAC3H,CAAC;IA/BD;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,CAAC;gDACf;IAEzB;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,CAAC;gDACf;IAEzB;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;8CACnD;IAE1B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;mDACjD;IAE5B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAE,CAAC;mDAC1D;IAE5B;QADC,QAAQ,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,sBAAsB,EAAE,CAAC;oDACtB;IAZjB,aAAa;QAJjC,OAAO;QACP,gBAAgB;QAChB,iBAAiB;QACjB,IAAI,CAAC,0BAA0B,CAAC;OACZ,aAAa,CAkCjC;IAAD,oBAAC;CAlCD,AAkCC,CAlC0C,EAAE,CAAC,SAAS,GAkCtD;kBAlCoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["import { GameTimer } from \"../../core/timer/GameTimer\";\n\nconst { ccclass, property, menu, disallowMultiple, executeInEditMode } = cc._decorator;\n\n@ccclass\n@disallowMultiple\n@executeInEditMode\n@menu(\"c2f/shader/ShaderShining\")\nexport default class ShaderShining extends cc.Component {\n    @property({ tooltip: CC_DEV && \"流光速度\" })\n    public speed: number = 1;\n    @property({ tooltip: CC_DEV && \"流光斜率\" })\n    public slope: number = 1;\n    @property({ tooltip: CC_DEV && \"流光宽度\", range: [0, Number.MAX_SAFE_INTEGER] })\n    public len: number = 0.25;\n    @property({ tooltip: CC_DEV && \"流光强度\", range: [0, Number.MAX_SAFE_INTEGER] })\n    public strength: number = 2;\n    @property({ tooltip: CC_DEV && \"两次流光动画之间的间隔时间\", range: [0, Number.MAX_SAFE_INTEGER] })\n    public interval: number = 1;\n    @property({ tooltip: CC_DEV && \"流光速度是否受到timeScale的影响\" })\n    public timeScale: boolean = false;\n\n    private _mat: cc.Material = null;\n    public get mat(): cc.Material {\n        if (!this._mat) {\n            this._mat = this.getComponent(cc.RenderComponent).getMaterial(0);\n        }\n        return this._mat;\n    }\n\n    protected start(): void {\n        this.updateShader();\n    }\n\n    protected update(): void {\n        this.updateShader();\n    }\n\n    public updateShader(): void {\n        this.mat.setProperty(\"shiningData\", new cc.Vec4(this.speed, this.slope, this.len, this.interval));\n        this.mat.setProperty(\"extra\", new cc.Vec4(this.timeScale ? GameTimer.scaleGameSec : GameTimer.gameSec, this.strength));\n    }\n}\n"]}