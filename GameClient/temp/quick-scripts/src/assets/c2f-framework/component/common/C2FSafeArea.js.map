{"version":3,"sources":["assets/c2f-framework/component/common/C2FSafeArea.ts"],"names":[],"mappings":";;;;;AAAA,MAAM;;;;;;;;;;;;;;;;;;;;;AAEA,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAGlD;IAAyC,+BAAY;IAArD;QAAA,qEAuDC;QApDG,eAAS,GAAY,KAAK,CAAC;QAG3B,kBAAY,GAAY,KAAK,CAAC;;IAiDlC,CAAC;IA/Ca,4BAAM,GAAhB;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAEO,gCAAU,GAAlB;QACI,IAAI,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,MAAM,CAAC;QAClD,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC;QAC3B,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;QAC1B,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAE1B,IAAI,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;QACjD,IAAI,WAAW,GAAG,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC;QAC/C,0CAA0C;QAE1C,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE;YAC7B,WAAW,GAAG,WAAW,GAAG,CAAC,CAAC;SACjC;aAAM;YACH,WAAW,GAAG,WAAW,GAAG,EAAE,IAAI,EAAE,IAAI,WAAW,CAAC;SACvD;QACD,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,MAAM,EAAE;YACR,IAAM,OAAO,GAAG,QAAQ,CAAC;YACzB,IAAM,OAAO,GAAG,QAAQ,CAAC;YACzB,IAAI,IAAI,CAAC,SAAS,IAAI,MAAM,CAAC,UAAU,EAAE;gBACrC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;oBAClB,MAAM,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;iBAChC;gBACD,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC;aAClD;YACD,IAAI,IAAI,CAAC,YAAY,IAAI,MAAM,CAAC,aAAa,EAAE;gBAC3C,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE;oBAClB,MAAM,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;iBACnC;gBACD,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC,CAAC,IAAI,EAAE,CAAC;aACtD;YACD,MAAM,CAAC,eAAe,EAAE,CAAC;SAC5B;aAAM;YACH,IAAI,UAAU,GAAG,EAAE,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,UAAU,GAAG,WAAW,CAAC;SAClE;IACL,CAAC;IAEM,kCAAY,GAAnB,UAAoB,MAAe;QAC/B,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;QACxB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAlDD;QADC,QAAQ,EAAE;kDACgB;IAG3B;QADC,QAAQ,EAAE;qDACmB;IANb,WAAW;QAF/B,OAAO;QACP,IAAI,CAAC,wBAAwB,CAAC;OACV,WAAW,CAuD/B;IAAD,kBAAC;CAvDD,AAuDC,CAvDwC,EAAE,CAAC,SAAS,GAuDpD;kBAvDoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["//屏幕适配\n\nconst { ccclass, property, menu } = cc._decorator;\n@ccclass\n@menu(\"c2f/common/C2FSafeArea\")\nexport default class C2FSafeArea extends cc.Component {\n\n    @property()\n    topEnable: boolean = false;\n\n    @property()\n    bottomEnable: boolean = false;\n\n    protected onLoad(): void {\n        this.updateArea();\n    }\n\n    private updateArea() {\n        let dH = cc.view.getDesignResolutionSize().height;\n        let rH = cc.winSize.height;\n        let rW = cc.winSize.width;\n        let nH = this.node.height;\n\n        let safeRect = c2f.utils.platform.getSafeAreaR();\n        let notchHeight = (rH - safeRect.height) * 0.5;\n        // cc.log(\"notchHeight == \", notchHeight);\n\n        if (cc.sys.os === cc.sys.OS_IOS) {\n            notchHeight = notchHeight / 2;\n        } else {\n            notchHeight = notchHeight > 43 && 43 || notchHeight;\n        }\n        let widget = this.node.getComponent(cc.Widget);\n        if (widget) {\n            const keyOriT = 'oriTop';\n            const keyOriB = 'oriBot';\n            if (this.topEnable && widget.isAlignTop) {\n                if (!widget[keyOriT]) {\n                    widget[keyOriT] = widget.top;\n                }\n                widget.top = widget[keyOriT] + 2 * notchHeight;\n            }\n            if (this.bottomEnable && widget.isAlignBottom) {\n                if (!widget[keyOriB]) {\n                    widget[keyOriB] = widget.bottom;\n                }\n                widget.bottom = widget[keyOriB] + safeRect.y || 10;\n            }\n            widget.updateAlignment();\n        } else {\n            let paddingTop = dH * 0.5 - this.node.y;\n            this.node.y = safeRect.height * 0.5 - paddingTop - notchHeight;\n        }\n    }\n\n    public setTopEnable(enable: boolean) {\n        this.topEnable = enable;\n        this.updateArea();\n    }\n\n}\n"]}