{"version":3,"sources":["assets/c2f-framework/component/common/ProgressAdd.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAIlD;IAAiC,+BAAY;IAA7C;QAAA,qEAmDC;QAhDW,aAAO,GAAW,CAAC,CAAC;QAE5B,WAAW;QACH,YAAM,GAAmB,IAAI,CAAC;QACtC,WAAW;QACH,eAAS,GAAW,IAAI,CAAC;;IA2CrC,CAAC;IAzCG,4BAAM,GAAN;QACI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;IACzD,CAAC;IAEO,+BAAS,GAAjB;QACI,EAAE,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC;SACzC;IACL,CAAC;IAEM,iCAAW,GAAlB,UAAmB,KAAa,EAAE,OAAe,EAAE,SAAkB;QACjE,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,SAAS,EAAE;YACX,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;SAClC;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;SAChC;IACL,CAAC;IAEO,+BAAS,GAAjB,UAAkB,KAAa,EAAE,OAAe;QAC5C,IAAI,OAAO,GAAG,CAAC,EAAE;YACb,IAAI,OAAO,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;YACxD,IAAI,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;YACnC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;iBAChB,EAAE,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;iBAC5B,QAAQ,CACL,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,EAC1C,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;iBAC3D,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;iBACnB,GAAG,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;iBACpB,EAAE,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;iBAChC,KAAK,EAAE,CAAC;SAChB;aAAM;YACH,IAAI,OAAO,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;YAC5D,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;iBAChB,EAAE,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;iBAChC,KAAK,EAAE,CAAC;SAChB;IACL,CAAC;IA/CD;QADC,QAAQ,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;gDACL;IAHnB,WAAW;QAFvB,OAAO;QACP,IAAI,CAAC,wBAAwB,CAAC;OAClB,WAAW,CAmDvB;IAAD,kBAAC;CAnDD,AAmDC,CAnDgC,EAAE,CAAC,SAAS,GAmD5C;AAnDY,kCAAW","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property, menu } = cc._decorator;\n\n@ccclass\n@menu('c2f/common/ProgressAdd')\nexport class ProgressAdd extends cc.Component {\n\n    @property({ serializable: true })\n    private onceDur: number = 1;\n\n    /** 进度控件 */\n    private curBar: cc.ProgressBar = null;\n    /** 真实进度 */\n    private realValue: number = null;\n\n    onLoad() {\n        this.curBar = this.node.getComponent(cc.ProgressBar);\n    }\n\n    private stopAnima() {\n        cc.Tween.stopAllByTarget(this.node);\n        if (!isNaN(this.realValue)) {\n            this.curBar.progress = this.realValue;\n        }\n    }\n\n    public setProgress(value: number, fullTms: number, playAnima: boolean) {\n        this.stopAnima();\n        this.realValue = value;\n        if (playAnima) {\n            this.playAnima(value, fullTms);\n        } else {\n            this.curBar.progress = value;\n        }\n    }\n\n    private playAnima(value: number, fullTms: number) {\n        if (fullTms > 0) {\n            let restDur = (1 - this.curBar.progress) * this.onceDur;\n            let newpDur = value * this.onceDur;\n            cc.tween(this.curBar)\n                .to(restDur, { progress: 1 })\n                .sequence(\n                    cc.tween(this.curBar).set({ progress: 0 }),\n                    cc.tween(this.curBar).to(this.onceDur, { progress: 1 }))\n                .repeat(fullTms - 1)\n                .set({ progress: 0 })\n                .to(newpDur, { progress: value })\n                .start();\n        } else {\n            let needDur = (value - this.curBar.progress) * this.onceDur;\n            cc.tween(this.curBar)\n                .to(needDur, { progress: value })\n                .start();\n        }\n    }\n}"]}