{"version":3,"sources":["assets/c2f-framework/component/ui/audit/AuditSet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAAkD;AAClD,yCAAwC;AACxC,yDAAwD;AAElD,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAkB,CAAC;AAGlD;IAAsC,4BAAY;IAAlD;QAAA,qEAiDC;QA9CG,aAAO,GAAgB,EAAE,CAAC;;IA8C9B,CAAC;IA5Ca,yBAAM,GAAhB;IACA,CAAC;IAES,wBAAK,GAAf;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAAA,CAAC;IAEM,6BAAU,GAAlB;QACI,IAAM,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;QACjC,IAAI,CAAC,OAAO,EAAE;YACV,OAAO;SACV;QACD,KAAgB,UAAY,EAAZ,KAAA,IAAI,CAAC,OAAO,EAAZ,cAAY,EAAZ,IAAY,EAAE;YAAzB,IAAI,GAAG,SAAA;YACR,IAAI,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE;gBACpC,SAAS;aACZ;YACD,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;SAC1B;IACL,CAAC;IAEO,+BAAY,GAApB,UAAqB,GAAc;QAC/B,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,qCAAiB,CAAC,CAAC;QACxD,IAAI,CAAC,MAAM,EAAE;YACT,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,qCAAiB,CAAC,CAAC;YACpD,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAO,CAAC,QAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;SACvF;QACD,IAAI,GAAG,CAAC,cAAc,EAAE;YACpB,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC;SACrC;QACD,IAAI,GAAG,CAAC,cAAc,EAAE;YACpB,GAAG,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC;YACnC,IAAI,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YACjD,IAAI,OAAO,EAAE;gBACT,OAAO,CAAC,YAAY,GAAG,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;aAC5C;SACJ;IACL,CAAC;IAEO,wCAAqB,GAA7B,UAA8B,MAAe;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAC,CAAC,IAAO,OAAO,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QACpE,IAAI,IAAI,EAAE;YACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;SAC3B;IACL,CAAC;IA7CD;QADC,QAAQ,CAAC,qBAAS,CAAC;6CACM;IAHT,QAAQ;QAF5B,OAAO;QACP,IAAI,CAAC,oBAAoB,CAAC;OACN,QAAQ,CAiD5B;IAAD,eAAC;CAjDD,AAiDC,CAjDqC,EAAE,CAAC,SAAS,GAiDjD;kBAjDoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { C2FEnum } from \"../../../define/C2FEnum\";\nimport { AuditItem } from \"./AuditItem\";\nimport { AuditTargetListen } from \"./AuditTargetListen\";\n\nconst { ccclass, property, menu } = cc._decorator;\n@ccclass\n@menu('c2f/audit/AuditSet')\nexport default class AuditSet extends cc.Component {\n\n    @property(AuditItem)\n    targets: AuditItem[] = [];\n\n    protected onLoad(): void {\n    }\n\n    protected start(): void {\n        this.updateView();\n    };\n\n    private updateView() {\n        const isAudit = szg.plat.isAudit;\n        if (!isAudit) {\n            return;\n        }\n        for (let one of this.targets) {\n            if (!one.target || !one.target.isValid) {\n                continue;\n            }\n            this.updateTarget(one);\n        }\n    }\n\n    private updateTarget(one: AuditItem) {\n        let listen = one.target.getComponent(AuditTargetListen);\n        if (!listen) {\n            listen = one.target.addComponent(AuditTargetListen);\n            one.target.on(C2FEnum.ExtEvent.NodeActiveChanged, this.onTargetActiveChanged, this);\n        }\n        if (one.controlVisible) {\n            one.target.active = one.tsVisible;\n        }\n        if (one.controlOpacity) {\n            one.target.opacity = one.tsOpacity;\n            let btnComp = one.target.getComponent(cc.Button);\n            if (btnComp) {\n                btnComp.interactable = one.tsOpacity > 0;\n            }\n        }\n    }\n\n    private onTargetActiveChanged(target: cc.Node) {\n        let find = this.targets.find((a) => { return a.target == target; });\n        if (find) {\n            this.updateTarget(find);\n        }\n    }\n}\n"]}