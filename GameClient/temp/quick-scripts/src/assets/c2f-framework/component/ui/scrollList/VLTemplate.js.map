{"version":3,"sources":["assets/c2f-framework/component/ui/scrollList/VLTemplate.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/**\n * 虚拟列表元素模板\n */\n\n/** 模板类型 */\nexport enum TemplateType {\n    NODE,\n    PREFAB\n}\n\nconst { ccclass, property, executeInEditMode } = cc._decorator;\n@ccclass(\"VLTemplate\")\n@executeInEditMode\nexport class VLTemplate {\n    @property({\n        type: cc.Node,\n        tooltip: CC_DEV && \"列表容器节点\",\n        visible() { return false; }\n    })\n    public content: cc.Node = null;\n\n    @property({ type: cc.Enum(TemplateType) })\n    private _templateType: TemplateType = TemplateType.PREFAB;\n    @property({\n        type: cc.Enum(TemplateType),\n        tooltip: CC_DEV && \"列表元素模板类型\"\n    })\n    public get templateType(): TemplateType { return this._templateType; }\n    public set templateType(v: TemplateType) {\n        if (this._templateType === v) {\n            return;\n        }\n        this._templateType = v;\n        this.resetMainItemChild(true);\n    }\n\n    @property(cc.Prefab)\n    private _templatePrefab: cc.Prefab = null;\n    @property({\n        type: cc.Prefab,\n        tooltip: CC_DEV && \"列表元素模板预制体\",\n        visible() { return this.templateType === TemplateType.PREFAB; }\n    })\n    public get templatePrefab(): cc.Prefab { return this._templatePrefab; }\n    public set templatePrefab(v: cc.Prefab) {\n        if (this._templatePrefab === v) {\n            return;\n        }\n        this._templatePrefab = v;\n        this.resetMainItemChild(true);\n    }\n\n    @property(cc.Node)\n    private _templateNode: cc.Node = null;\n    @property({\n        type: cc.Node,\n        tooltip: CC_DEV && \"列表元素模板节点\",\n        visible() { return this.templateType === TemplateType.NODE; }\n    })\n    public get templateNode(): cc.Node { return this._templateNode; }\n    public set templateNode(v: cc.Node) {\n        if (this._templateNode === v) {\n            return;\n        }\n        this._templateNode = v;\n        this.resetMainItemChild(true);\n    }\n\n    public editorCall: (mainItemChild: unknown, refresh: boolean) => void = null;\n\n    /**\n     * 更新枚举内容\n     * @param refresh 是否强制刷新inspector \n     * @returns \n     */\n    public resetMainItemChild(refresh: boolean = false): void {\n        if (!CC_EDITOR) {\n            return;\n        }\n        let mainItemChild = {};\n        if (this.templateType === TemplateType.NODE && this.templateNode) {\n            this.templateNode.children.forEach((c, i) => { mainItemChild[c.name] = i; });\n        } else if (this.templateType === TemplateType.PREFAB && this.templatePrefab) {\n            this.templatePrefab.data.children.forEach((c, i) => { mainItemChild[c.name] = i; });\n        }\n        this.editorCall?.(mainItemChild, refresh);\n    }\n}"]}