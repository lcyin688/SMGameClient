{"version":3,"sources":["assets/c2f-framework/component/language/LanguageLabel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { LanguageData } from \"../../core/language/LanguageData\";\nimport { C2FEnum } from \"../../define/C2FEnum\";\n\nconst { ccclass, property, menu } = cc._decorator;\n\n@ccclass\n@menu('c2f/language/LanguageLabel')\nexport default class LanguageLabel extends cc.Component {\n\n    @property({ serializable: true })\n    private _dataID: string = \"\";\n    @property({ type: cc.String, serializable: true })\n    get dataID(): string {\n        return this._dataID || \"\";\n    }\n    set dataID(value: string) {\n        this._dataID = value;\n        this.onDataIDChanged()\n    }\n\n    @property({ serializable: true })\n    _formatV: string = \"\";\n    @property({ type: cc.String, serializable: true })\n    get formatV(): string {\n        return this._formatV || \"\";\n    }\n    set formatV(value: string) {\n        this._formatV = value;\n        this.onDataIDChanged()\n    }\n\n    onLoad() {\n        this.onDataIDChanged();\n        cc.director.on(C2FEnum.ExtEvent.SwitchLanguage, this.onDataIDChanged, this);\n    }\n\n    onDestroy() {\n        cc.director.off(C2FEnum.ExtEvent.SwitchLanguage, this.onDataIDChanged, this);\n    }\n\n    private onDataIDChanged() {\n        this.refreshFromWords();\n    }\n\n    public refreshFromWords() {\n        if (!this._dataID) {\n            return;\n        }\n        let text = ''\n        let wordId = Number(this.dataID);\n\n        let fmtV = this.formatV;\n        if (fmtV.length <= 0) {\n            fmtV = 'UIV_Null';\n        }\n        if (CC_EDITOR) {\n            text = LanguageData.getLangByID(wordId, fmtV);\n        } else {\n            text = c2f.language.getLangByID(wordId, fmtV);\n        }\n        let spcomp: cc.Label | cc.RichText = this.getComponent(cc.Label);\n        if (!spcomp) {\n            spcomp = this.getComponent(cc.RichText);\n            if (!spcomp) {\n                cc.warn(\"[LanguageLabel], 该节点没有cc.Label || cc.RichText组件\");\n                return;\n            }\n        }\n        spcomp.string = text;\n    }\n}\n"]}