{"version":3,"sources":["assets/c2f-framework/hack/ButtonHack.ts"],"names":[],"mappings":";;;;;AAAA,+BAA+B;;;AAE/B,+CAA8C;AAE9C,IAAY,eAGX;AAHD,WAAY,eAAe;IACvB,aAAa;IACb,gEAA6C,CAAA;AACjD,CAAC,EAHW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAG1B;AAED,IAAY,WAKX;AALD,WAAY,WAAW;IACnB,iDAAU,CAAA;IACV,+CAAS,CAAA;IACT,mDAAW,CAAA;IACX,qDAAY,CAAA;AAChB,CAAC,EALW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAKtB;AAED,IAAI,CAAC,SAAS,EAAE;IACZ,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,EAAE;QAC5C,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,IAAI,CAAC;KACpD;IAED,YAAY;IACZ,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,qBAAqB,GAAG,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC;IACjF,YAAY;IACZ,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,KAAU;QACvD,IAAI,IAAI,CAAC,qBAAqB,EAAE;YAC5B,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;SACrC;QACD,IAAI,IAAI,CAAC,IAAI,EAAE;YACX,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;SACvD;IACL,CAAC,CAAC;IAGF,YAAY;IACZ,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,GAAG,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC;IAC3E,YAAY;IACZ,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,GAAG,UAAU,KAAK;QAC/C,cAAc;QACd,IAAI,OAAO,GAAG,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;QACrC,IAAI,WAAW,GAAG,IAAI,CAAC;QACvB,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,WAAW,GAAG,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;SAC1C;QACD,IAAI,WAAW,IAAI,WAAW,GAAG,GAAG,EAAE;YAClC,OAAO;SACV;QACD,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC;QACzB,QAAQ;QACR,IAAI,IAAI,CAAC,kBAAkB,EAAE;YACzB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;SAClC;QACD,kBAAkB;QAClB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAClD,IAAI,GAAG,EAAE;YACL,OAAO;SACV;QACD,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC9B,IAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;YAC1B,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;SACpC;QACD,IAAI,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;YACxB,QAAQ,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SACzD;QACD,IAAI,EAAE,GAAG,mBAAQ,CAAC,SAAS,CAAC,MAAM,CAAC;QACnC,IAAI,mBAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YAC/C,EAAE,GAAG,mBAAQ,CAAC,SAAS,CAAC,KAAK,CAAC;SACjC;IACL,CAAC,CAAC;CACL","file":"","sourceRoot":"/","sourcesContent":["// 基于CocosCreator2.x 按钮组件hack代码\n\nimport { C2FConst } from \"../define/C2FConst\";\n\nexport enum ButtonHackEvent {\n    /** 按钮状态变更 */\n    STATE_CHANGE = \"ButtonHackEvent-STATE_CHANGE\",\n}\n\nexport enum ButtonState {\n    NORMAL = 0,\n    HOVER = 1,\n    PRESSED = 2,\n    DISABLED = 3,\n}\n\nif (!CC_EDITOR) {\n    if (!cc.Button.prototype[\"__$CCButtonHack$__\"]) {\n        cc.Button.prototype[\"__$CCButtonHack$__\"] = true;\n    }\n\n    //@ts-ignore\n    cc.Button.prototype.engineApplyTransition = cc.Button.prototype._applyTransition;\n    //@ts-ignore\n    cc.Button.prototype._applyTransition = function (state: any) {\n        if (this.engineApplyTransition) {\n            this.engineApplyTransition(state);\n        }\n        if (this.node) {\n            this.node.emit(ButtonHackEvent.STATE_CHANGE, state);\n        }\n    };\n\n\n    //@ts-ignore\n    cc.Button.prototype.engineOnTouchBegan = cc.Button.prototype._onTouchBegan;\n    //@ts-ignore\n    cc.Button.prototype._onTouchBegan = function (event) {\n        //所有按钮统一添加点击间隔\n        let curTick = (new Date()).getTime();\n        let clickIntval = null;\n        if (this.touchTick) {\n            clickIntval = curTick - this.touchTick;\n        }\n        if (clickIntval && clickIntval < 300) {\n            return;\n        }\n        this.touchTick = curTick;\n        //engine\n        if (this.engineOnTouchBegan) {\n            this.engineOnTouchBegan(event);\n        }\n        //如果有UI特效组件则优先使用组件\n        let sfx = this.node.getComponent('UIAudioEffect');\n        if (sfx) {\n            return;\n        }\n        let realName = this.node.name;\n        if (realName.startsWith('_')) {\n            realName = realName.substring(1);\n        }\n        if (realName.endsWith('_')) {\n            realName = realName.substring(0, realName.length - 1);\n        }\n        let id = C2FConst.UIAudioID.common;\n        if (C2FConst.closeBtnNames.indexOf(realName) >= 0) {\n            id = C2FConst.UIAudioID.close;\n        }\n    };\n}\n\ndeclare module cc {\n    interface Button {\n        touchTick: number;\n    }\n}\n\nexport { };"]}