{"version":3,"sources":["assets/c2f-framework/core/timer/Timer.ts"],"names":[],"mappings":";;;;;;;AAAA;IAuBI,eAAY,IAAgB;QAAhB,qBAAA,EAAA,QAAgB;QAtB5B,aAAQ,GAAoB,IAAI,CAAC;QAEzB,iBAAY,GAAW,CAAC,CAAC;QAMzB,UAAK,GAAW,CAAC,CAAC,CAAC;QAevB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IApBD,sBAAI,8BAAW;aAAf;YACI,OAAO,IAAI,CAAC,YAAY,CAAC;QAC7B,CAAC;;;OAAA;IAID,sBAAI,uBAAI;QADR,gBAAgB;aAChB;YACI,OAAO,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;aACD,UAAS,IAAY;YACjB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAqB,SAAS;YAChD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAiB,OAAO;QAClD,CAAC;;;OAJA;IAMD,sBAAI,2BAAQ;aAAZ;YACI,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC;QAC1C,CAAC;;;OAAA;IAMD,sBAAM,GAAN,UAAO,EAAU;;QACb,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;YAAE,OAAO,KAAK,CAAC;QAEjC,IAAI,CAAC,YAAY,IAAI,EAAE,CAAC;QAExB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,EAAE;YACjC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC;YAChC,MAAA,IAAI,CAAC,QAAQ,0CAAE,IAAI,CAAC,IAAI,EAAE;YAC1B,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,qBAAK,GAAL;QACI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;IAC1B,CAAC;IAED,oBAAI,GAAJ;QACI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;IACnB,CAAC;IACL,YAAC;AAAD,CAhDA,AAgDC,IAAA;AAhDY,sBAAK","file":"","sourceRoot":"/","sourcesContent":["export class Timer {\n    callback: Function | null = null;\n\n    private _elapsedTime: number = 0;\n\n    get elapsedTime(): number {\n        return this._elapsedTime;\n    }\n\n    private _step: number = -1;\n    /** 触发间隔时间（秒） */\n    get step(): number {\n        return this._step;\n    }\n    set step(step: number) {\n        this._step = step;                     // 每次修改时间\n        this._elapsedTime = 0;                 // 逝去时间\n    }\n\n    get progress(): number {\n        return this._elapsedTime / this._step;\n    }\n\n    constructor(step: number = 0) {\n        this.step = step;\n    }\n\n    update(dt: number) {\n        if (this.step <= 0) return false;\n\n        this._elapsedTime += dt;\n\n        if (this._elapsedTime >= this._step) {\n            this._elapsedTime -= this._step;\n            this.callback?.call(this);\n            return true;\n        }\n        return false;\n    }\n\n    reset() {\n        this._elapsedTime = 0;\n    }\n\n    stop() {\n        this._elapsedTime = 0;\n        this.step = -1;\n    }\n}"]}