{"version":3,"sources":["assets/entrance/script/game/PlayerData.ts"],"names":[],"mappings":";;;;;;;AAAA,mDAAkD;AAClD,+CAA8C;AAG9C,oBAAoB;AACpB;IA4CI;QAjCA,aAAa;QACL,eAAU,GAAY,KAAK,CAAC;QAiChC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IA5CD,sBAAW,iBAAG;aAAd;YACI,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;gBAClB,UAAU,CAAC,IAAI,GAAG,IAAI,UAAU,EAAE,CAAC;aACtC;YACD,OAAO,UAAU,CAAC,IAAI,CAAC;QAC3B,CAAC;;;OAAA;IAMD,sBAAW,iCAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aACD,UAAqB,KAAc;YAC/B,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,KAAK,IAAI,IAAI,CAAC,aAAa,EAAE;gBAC7B,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,aAAa,EAAE;oBAChC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC;iBAC1D;gBACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;aAC7B;QACL,CAAC;;;OATA;IAeD,sBAAW,8BAAM;QADjB,WAAW;aACX;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;;;OAAA;IAGD,sBAAW,4BAAI;aAAf;YACI,OAAO,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;;;OAAA;IAWD,UAAU;IACH,+BAAU,GAAjB;IACA,CAAC;IAID,aAAa;IACL,iCAAY,GAApB;QACI,KAAgB,UAAc,EAAd,KAAA,IAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc,EAAE;YAA3B,IAAI,GAAG,SAAA;YACR,IAAI,GAAG,CAAC,KAAK,EAAE;gBACX,GAAG,CAAC,KAAK,EAAE,CAAC;aACf;YACD,IAAI,GAAG,CAAC,OAAO,EAAE;gBACb,GAAG,CAAC,OAAO,EAAE,CAAA;aAChB;SACJ;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,aAAa;IACN,8BAAS,GAAhB,UAAiB,EAAU,EAAE,IAAS;QAClC,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SAC9B;aAAM;YACH,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,EAAE,CAAC;YAC9C,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;SACjC;IACL,CAAC;IAEO,gCAAW,GAAnB,UAAoB,EAAU,EAAE,IAAS;IAEzC,CAAC;IAEM,gCAAW,GAAlB;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,IAAI,uBAAU,EAAE,CAAC;QAChC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,GAAG,IAAI,qBAAS,EAAE,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IACpC,CAAC;IAxFM,eAAI,GAAe,IAAI,CAAC;IAyFnC,iBAAC;CA1FD,AA0FC,IAAA;AA1FY,gCAAU;AAkGvB,GAAG,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC","file":"","sourceRoot":"/","sourcesContent":["import { PublicData } from \"./plrBase/PublicData\";\nimport { LoginData } from \"./login/LoginData\";\n\n\n/** 玩家数据总领：具体模块数据 */\nexport class PlayerData {\n    static _ins: PlayerData = null;\n    static get ins() {\n        if (!PlayerData._ins) {\n            PlayerData._ins = new PlayerData();\n        }\n        return PlayerData._ins;\n    }\n\n    private beforeLoadCfg: { [key: number]: any };\n\n    /** 配置加载成功 */\n    private _cfgLoaded: boolean = false;\n    public get cfgLoaded(): boolean {\n        return this._cfgLoaded;\n    }\n    public set cfgLoaded(value: boolean) {\n        this._cfgLoaded = value;\n        if (value && this.beforeLoadCfg) {\n            for (let key in this.beforeLoadCfg) {\n                this.dispatchMsg(Number(key), this.beforeLoadCfg[key]);\n            }\n            this.beforeLoadCfg = null;\n        }\n    }\n\n\n    /** 公用数据 */\n    private _public: PublicData;\n    /** 公用数据 */\n    public get public() {\n        return this._public;\n    }\n    /** 排行榜 */\n    private _rank: LoginData;\n    public get rank() {\n        return this._rank;\n    }\n\n\n\n    /** 消息分发列表 */\n    private dispatchs: any[];\n\n    constructor() {\n        this.dispatchs = [];\n    }\n\n    /** 初始化 */\n    public initPlayer() {\n    }\n\n\n\n    /** 清空模块数据 */\n    private clearModules() {\n        for (let one of this.dispatchs) {\n            if (one.reset) {\n                one.reset();\n            }\n            if (one.release) {\n                one.release()\n            }\n        }\n        this._public = null;\n        this._rank = null;\n        this.dispatchs = [];\n    }\n\n    /** 分发网络消息 */\n    public handleMsg(op: number, data: any) {\n        if (this.cfgLoaded) {\n            this.dispatchMsg(op, data);\n        } else {\n            this.beforeLoadCfg = this.beforeLoadCfg || {};\n            this.beforeLoadCfg[op] = data;\n        }\n    }\n\n    private dispatchMsg(op: number, data: any) {\n\n    }\n\n    public initModules() {\n        this.dispatchs = [];\n        this._public = new PublicData();\n        this.dispatchs.push(this._public);\n        this._rank = new LoginData();\n        this.dispatchs.push(this._rank);\n    }\n}\n\ndeclare global {\n    interface ISZG {\n        player: PlayerData;\n    }\n}\n\nszg.player = PlayerData.ins;\nexport { };"]}