{"version":3,"sources":["assets/c2f-framework/component/common/CyclicScrollBG.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/** 循环滚动页面:为了便于运算，约定如下：\n * 1、子节点为两个,尺寸一致\n * 2、子节点宽度(高度)要大于屏幕宽度(高度)\n * */\n\nimport { UIPrefabBase } from \"../../gui/layer/UIPrefabBase\";\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport class CyclicScrollBG extends UIPrefabBase {\n\n    @property({ serializable: true })\n    vertical: boolean = false;\n\n    @property({ serializable: true })\n    speed: number = 0;\n\n    @property({ serializable: true, tooltip: \"高性能模式:该模式下会修改自动修改节点锚点\" })\n    highPerform: boolean = false;\n\n    //--------------UI对象-------------    \n    /** 标题 */\n    spBg1: cc.Node = null;\n    /** 图标 */\n    spBg2: cc.Node = null;\n    //---------------------------------\n\n    //背景面板：移动背景是移动此节点\n    private bgPanel: cc.Node = null;\n    //子页面大小\n    private subSize: cc.Size = null;\n    //节点初始位置\n    private initPos: cc.Vec3 = cc.v3(0, 0, 0);\n\n    //刷新帧率\n    private refreshFR: number = 1 / 10;\n    //刷新间隔\n    private refreshInterval: number = this.refreshFR;\n\n    //缓存对象：防止一直重复创建\n    private referSub: { node: cc.Node, posL: cc.Vec3 } = { node: null, posL: cc.v3(0, 0, 0) };\n    private otherSub: { node: cc.Node, posL: cc.Vec3 } = { node: null, posL: cc.v3(0, 0, 0) };\n\n    protected onLoad() {\n        super.onLoad();\n    }\n\n    protected onDestory() {\n        this.initPos = null;\n        this.referSub = null;\n        this.otherSub = null;\n    }\n\n    protected initProperty() {\n        super.initProperty();\n        this.spBg1 = this.get('_spBg1_');\n        this.spBg2 = this.get('_spBg2_');\n    }\n\n    protected start() {\n        this.bgPanel = this.node;\n        this.subSize = this.spBg1.getContentSize();\n\n        if (this.highPerform) {\n            if (this.vertical) {\n                //TODO:\n            } else {\n                let szView = cc.view.getVisibleSize();\n                let curPosW = c2f.utils.node.getNodeWorldPosition(this.bgPanel);\n                let oriPos = cc.Vec2.ZERO.clone();\n                let pos2Panel = cc.Vec3.ZERO.clone();\n                if (this.speed > 0) {\n                    this.bgPanel.setAnchorPoint(0, this.bgPanel.anchorY);\n                    for (let i = 0; i < this.bgPanel.children.length; i++) {\n                        let one = this.bgPanel.children[i];\n                        c2f.utils.node.getNodePosition(one, oriPos);\n                        let posX = i * this.subSize.width + one.anchorX * this.subSize.width;\n                        one.setPosition(posX, oriPos.y, 0);\n                    }\n                    this.bgPanel.parent.convertToNodeSpaceAR(cc.v3(szView.width - 2 * this.subSize.width, curPosW.y, 0), pos2Panel);\n                    this.bgPanel.setPosition(pos2Panel);\n                } else {\n                    this.bgPanel.setAnchorPoint(1, this.bgPanel.anchorY);\n                    for (let i = 0; i < this.bgPanel.children.length; i++) {\n                        let one = this.bgPanel.children[i];\n                        c2f.utils.node.getNodePosition(one, oriPos);\n                        let posX = -i * this.subSize.width - (1 - one.anchorX) * this.subSize.width;\n                        one.setPosition(posX, oriPos.y, 0);\n                    }\n                    this.bgPanel.parent.convertToNodeSpaceAR(cc.v3(2 * this.subSize.width, curPosW.y, 0), pos2Panel);\n                    this.bgPanel.setPosition(pos2Panel);\n                }\n                this.bgPanel.getPosition(this.initPos);\n            }\n        }\n    }\n\n    protected update(dt: number) {\n        if (!this.spBg1 || !this.spBg2) {\n            return;\n        }\n        this.refreshInterval -= dt;\n        if (this.refreshInterval > 0) {\n            return;\n        }\n        this.refreshInterval += this.refreshFR;\n\n        let offset = this.speed * this.refreshFR;\n        this.moveBg(offset);\n    }\n\n    public moveBg(offset: number) {\n        //移动背景\n        if (this.vertical) {\n            this.moveVertical(offset);\n        } else {\n            this.moveHorizontal(offset);\n        }\n    }\n\n    private moveVertical(offset: number) {\n        c2f.utils.node.offestNodePos(this.bgPanel, 0, offset, 0);\n\n        let posTmp1 = c2f.utils.node.getFreeVecTmp();\n        let posTmp2 = c2f.utils.node.getFreeVecTmp();\n\n        this.spBg1.getPosition(posTmp1);\n        this.spBg2.getPosition(posTmp2);\n\n        if (offset > 0) {\n            if (posTmp2.y > posTmp1.y) {\n                this.referSub.node = this.spBg2;\n                this.referSub.posL.set(posTmp2);\n\n                this.otherSub.node = this.spBg1;\n                this.otherSub.posL.set(posTmp1);\n            } else {\n                this.referSub.node = this.spBg1;\n                this.referSub.posL.set(posTmp1);\n\n                this.otherSub.node = this.spBg2;\n                this.otherSub.posL.set(posTmp2);\n            }\n        }\n        if (c2f.utils.view.nodeIsOutByWidth(this.referSub.node)) {\n            this.referSub.node.setPosition(this.otherSub.posL);\n            this.otherSub.node.setPosition(this.referSub.posL);\n            c2f.utils.node.offestNodePos(this.bgPanel, 0, this.subSize.height * (offset > 0 ? -1 : 1), 0);\n        }\n\n        c2f.utils.node.releaseVecTmp(posTmp1);\n        c2f.utils.node.releaseVecTmp(posTmp2);\n    }\n\n    private moveHorizontal(offset: number) {\n        c2f.utils.node.offestNodePos(this.bgPanel, offset, 0, 0);\n\n        let posTmp1 = c2f.utils.node.getFreeVecTmp();\n        let posTmp2 = c2f.utils.node.getFreeVecTmp();\n\n        this.spBg1.getPosition(posTmp1);\n        this.spBg2.getPosition(posTmp2);\n\n        if (offset > 0) {\n            if (posTmp2.x > posTmp1.x) {\n                this.referSub.node = this.spBg2;\n                this.referSub.posL.set(posTmp2);\n\n                this.otherSub.node = this.spBg1;\n                this.otherSub.posL.set(posTmp1);\n            } else {\n                this.referSub.node = this.spBg1;\n                this.referSub.posL.set(posTmp1);\n\n                this.otherSub.node = this.spBg2;\n                this.otherSub.posL.set(posTmp2);\n            }\n        } else {\n            if (posTmp1.x < posTmp2.x) {\n                this.referSub.node = this.spBg1;\n                this.referSub.posL.set(posTmp1);\n\n                this.otherSub.node = this.spBg2;\n                this.otherSub.posL.set(posTmp2);\n            } else {\n                this.referSub.node = this.spBg2;\n                this.referSub.posL.set(posTmp2);\n\n                this.otherSub.node = this.spBg1;\n                this.otherSub.posL.set(posTmp1);\n            }\n        }\n        if (this.highPerform) {\n            let posTmp3 = c2f.utils.node.getNodePosition(this.bgPanel);\n            let offsetX = posTmp3.x - this.initPos.x;\n            if (Math.abs(offsetX) >= this.subSize.width) {\n                this.referSub.node.setPosition(this.otherSub.posL);\n                this.otherSub.node.setPosition(this.referSub.posL);\n                c2f.utils.node.offestNodePos(this.bgPanel, this.subSize.width * (offset > 0 ? -1 : 1), 0, 0);\n            }\n        } else {\n            if (c2f.utils.view.nodeIsOutByWidth(this.referSub.node)) {\n                this.referSub.node.setPosition(this.otherSub.posL);\n                this.otherSub.node.setPosition(this.referSub.posL);\n                c2f.utils.node.offestNodePos(this.bgPanel, this.subSize.width * (offset > 0 ? -1 : 1), 0, 0);\n            }\n        }\n\n        c2f.utils.node.releaseVecTmp(posTmp1);\n        c2f.utils.node.releaseVecTmp(posTmp2);\n    }\n}\n"]}