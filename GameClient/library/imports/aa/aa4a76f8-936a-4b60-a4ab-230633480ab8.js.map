{"version":3,"sources":["assets/c2f-framework/component/common/GradientColor.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nconst { ccclass, property, menu, requireComponent, executeInEditMode } = cc._decorator;\n\n/** 渐变方向 */\nenum GradientDir {\n    /** 水平 */\n    horizontal = 1,\n    /** 垂直 */\n    vertical = 2,\n    /** 4围 */\n    FourDot = 3,\n}\n\n\n@ccclass\n@menu('c2f/gui/GradientLabel')\n@executeInEditMode\nexport default class GradientLabel extends cc.Component {\n\n    @property({ type: cc.Enum(GradientDir), tooltip: \"渐变方向\" })\n    _director = GradientDir.horizontal;\n    @property({ type: cc.Enum(GradientDir), tooltip: \"渐变方向\" })\n    set director(val: GradientDir) {\n        this._director = val;\n        this.transBEToArr();\n    }\n    get director() {\n        return this._director;\n    }\n\n    @property()\n    _beginColor: cc.Color = cc.Color.WHITE;\n    @property({ type: cc.Color, visible: function () { return this.director != GradientDir.FourDot; }, tooltip: \"左(上)侧颜色\" })\n    set beginColor(clr: cc.Color) {\n        this._beginColor = clr;\n        this.transBEToArr();\n    }\n    get beginColor() {\n        return this._beginColor;\n    }\n\n    @property()\n    _endColor: cc.Color = cc.Color.WHITE;\n    @property({ type: cc.Color, visible: function () { return this.director != GradientDir.FourDot; }, tooltip: \"右(下)侧颜色\" })\n    set endColor(clr: cc.Color) {\n        this._endColor = clr;\n        this.transBEToArr();\n    }\n    get endColor() {\n        return this._endColor;\n    }\n\n    @property({ type: cc.Color })\n    _verColors: cc.Color[] = [\n        cc.color(255, 255, 255),\n        cc.color(255, 255, 255),\n        cc.color(255, 255, 255),\n        cc.color(255, 255, 255)\n    ];\n    @property({ type: cc.Color, visible: function () { return this.director == GradientDir.FourDot; }, tooltip: \"四角颜色：0：左下角，1：右下角，2：左上角，3：右上角\" })\n    set verColors(vColors: cc.Color[]) {\n        this._verColors = vColors;\n        this._updateColors();\n    }\n    get verColors() {\n        return this._verColors;\n    }\n\n    private transBEToArr() {\n        if (this.director == GradientDir.horizontal) {\n            this.verColors = [this._beginColor, this.endColor, this._beginColor, this.endColor];\n        } else if (this.director == GradientDir.vertical) {\n            this.verColors = [this.endColor, this.endColor, this._beginColor, this._beginColor];\n        }\n    }\n\n    _updateColors() {\n        const cmp = this.getComponent(cc.RenderComponent);\n        if (!cmp) return;\n        const _assembler = cmp['_assembler'];\n        if (!(_assembler instanceof cc['Assembler2D'])) return;\n        const uintVerts = _assembler._renderData.uintVDatas[0];\n        if (!uintVerts) return;\n        const color = this.node.color;\n        const floatsPerVert = _assembler.floatsPerVert;\n        const colorOffset = _assembler.colorOffset;\n        let count = 0;\n        for (let i = colorOffset, l = uintVerts.length; i < l; i += floatsPerVert) {\n            uintVerts[i] = (this.verColors[count++] || color)['_val'];\n        }\n    }\n\n    onEnable() {\n        cc.director.once(cc.Director.EVENT_AFTER_DRAW, this._updateColors, this);\n    }\n\n    onDisable() {\n        cc.director.off(cc.Director.EVENT_AFTER_DRAW, this._updateColors, this);\n        this.node['_renderFlag'] |= cc['RenderFlow'].FLAG_COLOR;\n    }\n}\n"]}