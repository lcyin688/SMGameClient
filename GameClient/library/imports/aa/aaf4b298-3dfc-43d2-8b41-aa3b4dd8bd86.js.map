{"version":3,"sources":["assets/entrance/script/platform/PlatBase.ts"],"names":[],"mappings":";;;;;;;AAAA,2CAAuC;AAEvC;IA8BI;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,oBAAO,CAAC,YAAY,EAAE,CAAC;QAC7C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC5B,CAAC;IAED,kCAAkC;IACxB,mCAAgB,GAA1B;QACI,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAClC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;IAClC,CAAC;IAED,aAAa;IACN,mCAAgB,GAAvB,UAAwB,IAAY;QAChC,KAAK,IAAI,GAAG,IAAI,IAAI,EAAE;YAClB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;SACpC;IACL,CAAC;IAED,eAAe;IACR,8BAAW,GAAlB,cAAuB,OAAO,IAAI,CAAC,CAAC,CAAC;IACrC,aAAa;IACN,gCAAa,GAApB,cAAyB,CAAC;IAC1B,aAAa;IACN,kCAAe,GAAtB,UAAuB,GAAW;QAC9B,IAAI,EAAE,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,KAAK;YACzB,IAAI;gBACA,IAAI,SAAS,IAAI,SAAS,CAAC,SAAS,EAAE;oBAClC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;iBACtC;aACJ;YAAC,OAAO,KAAK,EAAE;gBACZ,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACpB;SACJ;IACL,CAAC;IACD,eAAe;IACR,4BAAS,GAAhB,cAAqB,CAAC;IACtB,eAAe;IACR,iCAAc,GAArB,UAAsB,GAAW,IAAI,CAAC;IAEtC,eAAe;IACR,gCAAa,GAApB,UAAqB,GAAW,IAAI,CAAC;IACrC,cAAc;IACP,4BAAS,GAAhB,cAAqB,OAAO,KAAK,CAAC,CAAC,CAAC;IAEpC,4BAA4B;IAC5B,aAAa;IACN,0BAAO,GAAd,UAAe,KAAU,IAAI,CAAC;IAC9B,SAAS;IACF,wBAAK,GAAZ,cAAiB,CAAC;IAClB,SAAS;IACF,yBAAM,GAAb,cAAkB,CAAC;IACnB,WAAW;IACJ,gCAAa,GAApB,cAAyB,CAAC;IAC1B,SAAS;IACF,sBAAG,GAAV;QAAW,gBAAS;aAAT,UAAS,EAAT,qBAAS,EAAT,IAAS;YAAT,2BAAS;;IAAI,CAAC;IACzB,WAAW;IACJ,2BAAQ,GAAf,cAAoB,CAAC;IACrB,WAAW;IACJ,oCAAiB,GAAxB,cAA6B,CAAC;IAC9B,aAAa;IACN,6BAAU,GAAjB,UAAkB,IAAY,EAAE,GAAS,IAAI,CAAC;IAC9C,aAAa;IACN,oCAAiB,GAAxB,UAAyB,GAAW,IAAI,CAAC;IACzC,SAAS;IACF,wBAAK,GAAZ,cAAiB,CAAC;IAClB,cAAc;IACP,gCAAa,GAApB,cAAyB,CAAC;IAC1B,cAAc;IACP,kCAAe,GAAtB,cAA2B,CAAC;IAC5B,SAAS;IACF,6BAAU,GAAjB,UAAkB,KAAU,IAAI,CAAC;IAC1B,iCAAc,GAArB,UAAsB,IAAY,IAAI,OAAO,EAAE,CAAC,CAAC,CAAC;IAGlD,gCAAgC;IAChC,eAAe;IACR,+BAAY,GAAnB,UAAoB,IAAS;QACzB,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QAEzC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,IAAI,oBAAO,CAAC,OAAO,CAAC,OAAO,CAAC;QACtD,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAO,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAEhE,uBAAuB;QACvB,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,cAAc;IACP,gCAAa,GAApB,UAAqB,IAAS;QAC1B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QAE1C,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,KAAK,GAAG,GAAG,CAAC,IAAI,IAAI,oBAAO,CAAC,OAAO,CAAC,OAAO,CAAC;QAChD,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;SAC9D;QACD,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAO,CAAC,UAAU,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;IAC3D,CAAC;IAED,aAAa;IACN,iCAAc,GAArB,UAAsB,IAAS;QAC3B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IAED,aAAa;IACN,+BAAY,GAAnB,UAAoB,IAAS;QACzB,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,KAAK,GAAG,GAAG,CAAC,IAAI,IAAI,oBAAO,CAAC,OAAO,CAAC,OAAO,CAAC;QAChD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/B,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IAC5C,CAAC;IAED,cAAc;IACP,iCAAc,GAArB,UAAsB,IAAS;QAC3B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;IAC/C,CAAC;IAED,WAAW;IACJ,8BAAW,GAAlB,UAAmB,IAAS;QACxB,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;QACxC,OAAO;IACX,CAAC;IAEM,+BAAY,GAAnB,UAAoB,IAAS;QACzB,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAC;QACzC,OAAO;IACX,CAAC;IAED,cAAc;IACP,oCAAiB,GAAxB,UAAyB,IAAS;QAC9B,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;QAC/C,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,KAAK,GAAG,GAAG,CAAC,IAAI,IAAI,oBAAO,CAAC,OAAO,CAAC,OAAO,CAAC;QAChD,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAO,CAAC,UAAU,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IAC/D,CAAC;IACD,gBAAgB;IACN,iCAAc,GAAxB,UAAyB,KAAsB;QAC3C,IAAI,QAAQ,GAAW,EAAE,CAAC;QAC1B,IAAI,OAAO,KAAK,IAAI,QAAQ,EAAE;YAC1B,QAAQ,GAAG,KAAK,CAAC;SACpB;aAAM;YACH,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;SACpC;QACD,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED,YAAY;IACF,8BAAW,GAArB,UAAsB,IAAS;QAC3B,IAAI,GAAG,GAAG,IAAI,CAAC;QACf,IAAI,OAAO,IAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5C,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SAC1B;aAAM;YACH,GAAG,GAAG,IAAI,CAAC;SACd;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IACL,eAAC;AAAD,CArMA,AAqMC,IAAA;AArMY,4BAAQ","file":"","sourceRoot":"/","sourcesContent":["import { PlatDef } from \"./PlatDefine\";\n\nexport class PlatBase {\n    /** 玩家信息 */\n    playerInfo: PlatDef.GameUserInfo;\n    /** 平台配置 */\n    platCfg: PlatDef.PlatCfg;\n    /** sdk账号信息 */\n    accoutInfo: PlatDef.AccountLogin;\n    /** 设备信息 */\n    phoneInfo: PlatDef.PhoneInfo;\n    /** 初始化成功 */\n    sdkInitSuc: boolean;\n\n    /** 是否支持退出游戏界面 */\n    supportQuitGame: boolean;\n    /** 是否支持用户中心 */\n    supportAccountCenter: boolean;\n    /** 是否支持切换账号 */\n    supportSwitchAcc: boolean;\n    /** 是否支持Facebook */\n    supportFacebook: boolean;\n    /** 是否需要显示国内政策等UI */\n    showPolicies: boolean;\n    /** 是否需要用户协议 */\n    showUserAgreement: boolean;\n\n    /** APP版本号 */\n    appVersion: string;\n    /** 资源版本号 */\n    resVersion: string;\n\n    constructor() {\n        this.playerInfo = new PlatDef.GameUserInfo();\n        this.platCfg = null;\n        this.accoutInfo = null;\n        this.phoneInfo = null;\n        this.sdkInitSuc = false;\n        this.showPolicies = true;\n        this.loadLocalSetting();\n    }\n\n    /** 本地设置:原生是原生代码中设置，web通过链接解析设置 */\n    protected loadLocalSetting() {\n        this.supportQuitGame = false;\n        this.supportAccountCenter = false;\n        this.supportSwitchAcc = false;\n        this.supportFacebook = false;\n        this.showUserAgreement = true;\n    }\n\n    /** 更新玩家信息 */\n    public updatePlayerInfo(info: Object) {\n        for (let key in info) {\n            this.playerInfo[key] = info[key];\n        }\n    }\n\n    /** 获得平台配置信息 */\n    public loadPlatCfg() { return null; }\n    /** 获得手机信息 */\n    public loadPhoneInfo() { }\n    /** 拷贝到剪贴板 */\n    public copyToClipboard(txt: string) {\n        if (cc.sys.isBrowser) { //浏览器\n            try {\n                if (navigator && navigator.clipboard) {\n                    navigator.clipboard.writeText(txt);\n                }\n            } catch (error) {\n                cc.log('拷贝文本失败');\n            }\n        }\n    }\n    /** 初始化bugly */\n    public initBugly() { }\n    /** 初始化bugly */\n    public buglySetUserId(str: string) { }\n\n    /** bugly 版本 */\n    public setAppVersion(str: string) { }\n    /** 显示开发者面板 */\n    public showDevUI() { return false; }\n\n    /** ------sdk流程相关-------- */\n    /** 初始化SDK */\n    public initSDK(param: any) { }\n    /** 登录 */\n    public login() { }\n    /** 登出 */\n    public logout() { }\n    /** 切换账号 */\n    public switchAccount() { }\n    /** 支付 */\n    public pay(...params) { }\n    /** 退出游戏 */\n    public quitGame() { }\n    /** 用户中心 */\n    public openAccountCenter() { }\n    /** 提交用户信息 */\n    public submitInfo(type: string, ext?: any) { }\n    /** 展示用户协议 */\n    public showPrivacyPolicy(txt: string) { }\n    /** 分享 */\n    public share() { }\n    /** 上传vip信息 */\n    public sumbitVipInfo() { }\n    /** 前往app评分 */\n    public toAppStroeScore() { }\n    /** 通用 */\n    public commonFunc(param: any) { }\n    public getOtherByFlag(flag: string) { return \"\"; }\n\n\n    /** ----------平台回调----------- */\n    /** SDK初始化结果 */\n    public onSdkInitRet(data: any) {\n        c2f.log.logSDK('SDK init result:', data);\n\n        let ret = this.getRealData(data);\n        this.sdkInitSuc = ret.code == PlatDef.RetCode.success;\n        cc.director.emit(PlatDef.SdkCBEvent.onSdkInit, this.sdkInitSuc);\n\n        //有些SDK初始化时还没有获取设备信息的权限\n        this.loadPhoneInfo();\n    }\n\n    /** SDK登录结果 */\n    public onSdkLoginRet(data: any) {\n        c2f.log.logSDK('SDK login result:', data);\n\n        let ret = this.getRealData(data);\n        let isSuc = ret.code == PlatDef.RetCode.success;\n        if (isSuc) {\n            this.accoutInfo = ret;\n            this.accoutInfo.isBind = ret.facebook != '' ? true : false;\n        }\n        cc.director.emit(PlatDef.SdkCBEvent.onSdkLogin, isSuc);\n    }\n\n    /** 手机设备信息 */\n    public onLoadPhoneRet(data: any) {\n        c2f.log.logSDK('SDK phoneInfo result:', data);\n        this.phoneInfo = this.getRealData(data);\n    }\n\n    /** 账号信息绑定 */\n    public onSdkBindRet(data: any) {\n        c2f.log.logSDK('SDK bind result:', data);\n        let ret = this.getRealData(data);\n        let isSuc = ret.code == PlatDef.RetCode.success;\n        this.accoutInfo.isBind = isSuc;\n        cc.director.emit('onBindResult', isSuc);\n    }\n\n    /** SDK登出账号 */\n    public onSdkLogoutRet(data: any) {\n        c2f.log.logSDK('SDK logout result:', data);\n    }\n\n    /** 充值回调 */\n    public onSdkPayRet(data: any) {\n        c2f.log.logSDK('SDK pay result:', data);\n        //TODO:\n    }\n\n    public onSdkExitRet(data: any) {\n        c2f.log.logSDK('SDK exit result:', data);\n        //TODO:\n    }\n\n    /** 上传vip信息 */\n    public onSdkSubmitVipRet(data: any) {\n        c2f.log.logSDK('SDK submit vip result:', data);\n        let ret = this.getRealData(data);\n        let isSuc = ret.code == PlatDef.RetCode.success;\n        cc.director.emit(PlatDef.SdkCBEvent.onSdkVipSubmit, isSuc);\n    }\n    /** 将参数转换成字符串 */\n    protected getParamString(param: string | Object) {\n        let strParam: string = '';\n        if (typeof param == 'string') {\n            strParam = param;\n        } else {\n            strParam = JSON.stringify(param);\n        }\n        return strParam;\n    }\n\n    /** 获取有效值 */\n    protected getRealData(data: any) {\n        let ret = null;\n        if (typeof data == 'string' && data.length > 0) {\n            ret = JSON.parse(data);\n        } else {\n            ret = data;\n        }\n        return ret;\n    }\n}"]}