{"version":3,"sources":["assets/c2f-framework/component/common/RichTextPro.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["/** RichTextPro在cc.RichText的基础上增加了更多格式 \n * 新增直接使用图片：<iFile src='mainPack:/xx/xx/xx' click='handler' />\n * 新增预制体的使用：<prefab idx='0' click='handler' />\n*/\n\nconst HtmlTextParser = require('htmlTextParser');\nconst htmlParser = new HtmlTextParser();\n\n\ninterface RichEvent {\n    click: string;\n    param: string\n}\ninterface SytleResult {\n    newLine?: boolean,\n    imgAtlas?: string,\n    imgFile?: string,\n    prefab?: number,\n    event?: RichEvent,\n}\n\nconst { ccclass, property, executeInEditMode, menu } = cc._decorator;\n@ccclass\n@executeInEditMode\n@menu('c2f/controls/RichTextPro')\nexport default class RichTextPro extends cc.Component {\n\n    @property\n    private _string: string = '';\n    @property({ multiline: true, tooltip: '文本内容' })\n    get string() { return this._string; }\n    set string(value: string) {\n        this._string = value;\n        this.updateContent();\n    }\n\n    @property\n    private _outlineWidth: number = 0;\n    @property({ min: 0, tooltip: '描边宽度, 为0时表示无描边' })\n    private get outlineWidth() { return this._outlineWidth };\n    private set outlineWidth(value: number) {\n        this._outlineWidth = value;\n        this.updateContent();\n    }\n\n    @property\n    private _outlineColor: cc.Color = new cc.Color(0, 0, 0);\n    @property({ tooltip: '描边颜色', visible() { return this.outlineWidth > 0 } })\n    private get outlineColor() { return this._outlineColor };\n    private set outlineColor(value: cc.Color) {\n        this._outlineColor = value;\n        this.updateContent();\n    }\n\n    @property\n    private _fontFamily: string = 'Arial';\n    @property({ tooltip: '字体名称, 游戏字体可用：fzcsjt_LABEL' })\n    private get fontFamily() { return this._fontFamily };\n    private set fontFamily(value: string) {\n        this._fontFamily = value;\n        this.updateContent();\n    }\n\n    @property\n    private _fontSize: number = 50;\n    @property({ min: 4, tooltip: '字体大小' })\n    private get fontSize() { return this._fontSize };\n    private set fontSize(value: number) {\n        this._fontSize = value;\n        this.updateContent();\n    }\n\n    @property\n    private _spacingY: number = 10;\n    @property({ tooltip: '字体行间距' })\n    private get spacingY() { return this._spacingY };\n    private set spacingY(value: number) {\n        this._spacingY = value;\n        this.updateContent();\n    }\n\n    @property\n    private _maxWidth: number = 100;\n    @property({ tooltip: '富文本最大宽度' })\n    private get maxWidth() { return this._maxWidth };\n    private set maxWidth(value: number) {\n        this._maxWidth = value;\n        this.updateContent();\n    }\n\n    @property({ type: cc.Prefab, tooltip: '嵌入预制体' })\n    private _prefabs: cc.Prefab[] = [];\n    @property({ type: cc.Prefab, tooltip: '嵌入预制体' })\n    private get prefabs() { return this._prefabs };\n    private set prefabs(value: cc.Prefab[]) {\n        this._prefabs = value;\n        this.updateContent();\n    }\n\n    @property({ type: cc.Component.EventHandler, tooltip: '文本事件' })\n    private eventHandlers: cc.Component.EventHandler[] = [];\n\n    @property({ type: cc.SpriteAtlas, tooltip: '图集' })\n    private spAtlas: cc.SpriteAtlas = null;\n\n\n    public cvs: HTMLCanvasElement = null;\n    private ctx: CanvasRenderingContext2D = null;\n    private cellX: number = 0;\n    private cellY: number = 0;\n    private rowW: number = 0;\n    private rowH: number = 0;\n    private pageNode: cc.Node = null;\n\n    /** 临时参数 */\n    private bold: string = '';\n    private style: string = '0';\n    private tmpFontFml: string = '';\n    private tmpSZFont: number = 1;\n    private tmpOutLine: { width: number, color: string } = null;\n    private dymicFrame: Map<string, cc.SpriteFrame> = null;\n    /** 点击区域 */\n    private eventRect: Map<cc.Rect, RichEvent> = null;\n\n    protected start() {\n        this.updateContent();\n        this.node.on(cc.Node.EventType.SIZE_CHANGED, this.updateContent, this);\n        this.node.on(cc.Node.EventType.ANCHOR_CHANGED, this.updateContent, this);\n    }\n\n    private addEventRect(rect: cc.Rect, event: RichEvent) {\n        if (!this.eventRect) {\n            this.eventRect = new Map();\n        }\n        this.eventRect.set(rect, event);\n    }\n\n    private updateContent() {\n        if (cc.isValid(this.node)) {\n            this.node.removeAllChildren();\n            this.node.destroyAllChildren();\n        }\n        this.cvs = null;\n        this.ctx = null;\n\n        if (!this.string || this.string.length <= 0) {\n            return;\n        }\n\n        //初始化\n        this.rowW = 0;\n        this.rowH = this.fontSize + this.spacingY;\n        this.cellX = 0;\n        this.cellY = this.rowH;\n        this.tmpSZFont = this.fontSize;\n        this.tmpOutLine = { width: this.outlineWidth, color: `#${this.outlineColor.toHEX()}` };\n        if (this.eventRect) {\n            this.eventRect.clear();\n        }\n        if (this.dymicFrame) {\n            this.dymicFrame.clear()\n        }\n        this.bold = '';\n        this.style = '0';\n        this.tmpFontFml = this.fontFamily;\n        this.createPage();\n        if (!this.pageNode) throw new Error(\"Can't find page node\")\n        if (!this.ctx) throw new Error(\"Can't find canvas\");\n\n        let textArray = htmlParser.parse(this.string);\n        this.preloadImage(textArray, this.updateString.bind(this, textArray));\n    }\n\n    private updateTextStyle(styleObj: any) {\n        if (!styleObj) {\n            this.ctx.fillStyle = '#' + this.node.color.toHEX();\n            this.tmpSZFont = this.fontSize;\n            this.bold = '';\n            this.style = '';\n            this.tmpOutLine.width = this.outlineWidth;\n            this.tmpOutLine.color = `#${this.outlineColor.toHEX()}`;\n            this.ctx.font = `${this.bold} ${this.tmpSZFont}px ${this.tmpFontFml}`;\n            return null;\n        }\n        let result: SytleResult = {};\n        //颜色\n        if (styleObj.color) {\n            this.ctx.fillStyle = styleObj.color;\n        } else {\n            this.ctx.fillStyle = '#' + this.node.color.toHEX();\n        }\n        //字体大小\n        this.tmpSZFont = this.fontSize;\n        if (styleObj.size) {\n            this.tmpSZFont = Math.min(styleObj.size, this.fontSize);\n        }\n        //粗体\n        if (styleObj.hasOwnProperty('bold')) {\n            this.bold = 'bold';\n        } else {\n            this.bold = '';\n        }\n        //下划线·删除线\n        if (styleObj.hasOwnProperty('underline')) {\n            this.style = 'u';\n        } else {\n            if (styleObj.hasOwnProperty('delete')) {\n                this.style = 'd';\n            } else {\n                this.style = '';\n            }\n        }\n        //描边\n        if (styleObj.outline) {\n            this.tmpOutLine.width = styleObj.outline.width;\n            this.tmpOutLine.color = styleObj.outline.color;\n        } else {\n            this.tmpOutLine.width = this.outlineWidth;\n            this.tmpOutLine.color = `#${this.outlineColor.toHEX()}`;\n        }\n        //换行\n        if (styleObj.hasOwnProperty('newline')) {\n            result.newLine = true;\n        }\n        //图片·图集\n        if (styleObj.isImage) {\n            result.imgAtlas = styleObj.src;\n        }\n        //图片·文件\n        if (styleObj.isImgFile) {\n            result.imgFile = styleObj.src;\n        }\n        //预制体\n        if (styleObj.isPrefab) {\n            result.prefab = styleObj.idx;\n        }\n        //事件\n        if (styleObj.event) {\n            result.event = { click: styleObj.event.click, param: styleObj.event.param };\n        }\n        this.ctx.font = `${this.bold} ${this.tmpSZFont}px ${this.tmpFontFml}`;\n        return result;\n    }\n\n    //添加图片文件\n    private addImageByFile(url: string, event: RichEvent) {\n        let node = new cc.Node('image');\n        node.anchorX = 0;\n        node.anchorY = 0;\n        node.width = 1;\n        node.height = 1;\n        if (CC_EDITOR) {\n            node.width = this.rowH;\n            node.height = this.rowH;\n        } else {\n            let spt = node.addComponent(cc.Sprite);\n            if (this.dymicFrame && this.dymicFrame.has(url)) {\n                spt.spriteFrame = this.dymicFrame.get(url);\n            } else {\n                node.width = this.rowH;\n                node.height = this.rowH;\n            }\n            node.scale = this.rowH / node.height;\n            if (this.maxWidth > 0 && node.width * node.scale > this.maxWidth) {\n                node.scale = this.maxWidth / node.width;\n            }\n        }\n        let width = node.width * node.scale;\n        if (this.maxWidth > 0 && this.rowW + width > this.maxWidth) {\n            node.x = 0;\n            this.addRow();\n            this.rowW += width;\n        } else {\n            node.x = this.rowW;\n            this.rowW += width;\n            this.cellX = this.rowW;\n        }\n        node.setParent(this.pageNode);\n        node.y = -this.cellY;\n        if (event) {\n            let rect = cc.rect(node.x, node.y, width, this.tmpSZFont);\n            this.addEventRect(rect, event);\n        }\n    }\n\n    //添加图集图片\n    private addImageByAtlas(url: string, event: RichEvent) {\n        let node = new cc.Node('image');\n        node.anchorX = 0;\n        node.anchorY = 0;\n        node.width = 1;\n        node.height = 1;\n        if (CC_EDITOR) {\n            node.width = this.rowH;\n            node.height = this.rowH;\n        } else {\n            let spt = node.addComponent(cc.Sprite);\n            if (this.spAtlas) {\n                spt.spriteFrame = this.spAtlas.getSpriteFrame(url);\n            } else {\n                node.width = this.rowH;\n                node.height = this.rowH;\n            }\n            node.scale = this.rowH / node.height;\n            if (this.maxWidth >= 0 && node.width * node.scale > this.maxWidth) {\n                node.scale = this.maxWidth / node.width;\n            }\n        }\n        let width = node.width * node.scale;\n        if (this.maxWidth > 0 && this.rowW + width > this.maxWidth) {\n            node.x = 0;\n            this.addRow();\n            this.rowW += width;\n        } else {\n            node.x = this.rowW;\n            this.rowW += width;\n            this.cellX = this.rowW;\n        }\n        node.setParent(this.pageNode);\n        node.y = -this.cellY;\n        if (event) {\n            let rect = cc.rect(node.x, node.y, width, this.tmpSZFont);\n            this.addEventRect(rect, event);\n        }\n    }\n\n\n    //添加预制体\n    private addPrefab(idx: number, event: RichEvent) {\n        if (idx < 0 || idx > this.prefabs.length - 1) {\n            return;\n        }\n        let node = null;\n        let dstPrefab = this.prefabs[idx];\n        if (CC_EDITOR) {\n            node = cc.instantiate(dstPrefab);\n        } else {\n            node = c2f.res.instantiate(dstPrefab, this.node);\n        }\n        node.scale = this.rowH / node.height;\n        if (node.width * node.scale > this.node.width) {\n            node.scale = this.node.width / node.width;\n        }\n        let width = node.width * node.scale;\n        let height = node.height * node.scale;\n        let rectX = 0;\n        if (this.rowW + width > this.node.width) {\n            this.addRow();\n            this.rowW += width;\n            //换行成功才为0\n            rectX = this.rowW == width ? 0 : this.rowW;\n        } else {\n            rectX = this.rowW;\n            this.rowW += width;\n            this.cellX = this.rowW;\n        }\n        node.setParent(this.pageNode);\n        node.x = rectX + width * node.anchorX;\n        node.y = height * node.anchorY - this.cellY;\n        if (event) {\n            let rect = cc.rect(rectX, -this.cellY, width, height);\n            this.addEventRect(rect, event);\n        }\n    }\n\n    private preloadImage(arrText: any[], endCb: Function) {\n        let urls: string[] = [];\n        for (let one of arrText) {\n            if (!one.style) {\n                continue;\n            }\n            if (!one.style.isImgFile) {\n                continue\n            }\n            if (one.style.src.length > 0 && urls.indexOf(one.style.src) < 0) {\n                urls.push(one.style.src);\n            }\n        }\n        if (urls.length <= 0 || CC_EDITOR) {\n            endCb && endCb();\n        } else {\n            if (!this.dymicFrame) {\n                this.dymicFrame = new Map();\n            }\n            let cmplCnt = 0;\n            let checkCmpl = () => {\n                cmplCnt++;\n                if (cmplCnt >= urls.length) {\n                    endCb && endCb();\n                }\n            }\n            for (let one of urls) {\n                c2f.res.loadOne(one, cc.SpriteFrame).then((res: cc.SpriteFrame) => {\n                    this.dymicFrame.set(one, res);\n                    checkCmpl();\n                })\n            }\n        }\n    }\n\n    private updateString(textArray: any[]) {\n        /** 单字符宽度 */\n        let oneCharW = 0;\n        for (let i = 0, len = textArray.length; i <= len; ++i) {\n            if (i === len) {\n                this.pageToNode()\n            } else {\n                const one = textArray[i];\n                const subLen = one.text.length;\n                //样式调整\n                let result = this.updateTextStyle(one.style);\n                if (subLen <= 0) {\n                    //换行\n                    if (result && result.newLine) {\n                        this.addRow(true);\n                    }\n                    //图片·文件\n                    if (result && result.imgFile) {\n                        this.addImageByFile(result.imgFile, result.event);\n                    }\n                    //图片·图集\n                    if (result && result.imgAtlas) {\n                        this.addImageByAtlas(result.imgAtlas, result.event);\n                    }\n                    //预制体\n                    if (result && result.hasOwnProperty('prefab')) {\n                        this.addPrefab(result.prefab, result.event)\n                    }\n                } else {\n                    let event = result ? result.event : null;\n                    //文本\n                    this.cellX = this.rowW;\n                    let startID = 0;\n                    for (let idx = 0; idx <= subLen; ++idx) {\n                        if (idx >= subLen) {\n                            this.drawToPage(one.text.substring(startID), event);\n                        } else {\n                            const oneChar = one.text[idx];\n                            oneCharW = this.ctx.measureText(oneChar).width;\n                            //换行\n                            if (this.rowW + oneCharW > Math.max(this.node.width, this.maxWidth)) {\n                                this.drawToPage(one.text.substring(startID, idx), event);\n                                startID = idx;\n                                this.addRow();\n                                this.rowW += oneCharW;\n                            } else {\n                                this.rowW += oneCharW;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    private createPage() {\n        this.pageNode = new cc.Node(`page_${this.node.childrenCount}`);\n        this.pageNode['_objFlags'] |= cc.Object['Flags'].HideInHierarchy;\n        this.pageNode['_objFlags'] |= cc.Object['Flags'].LockedInEditor;\n\n        const font = this.ctx ? this.ctx.font : `${this.bold} ${this.fontSize}px ${this.tmpFontFml}`;\n        const fillStyle = this.ctx ? this.ctx.fillStyle : '#' + this.node.color.toHEX();\n\n        this.cvs = document.createElement('canvas');\n        this.ctx = this.cvs.getContext('2d');\n        this.cvs.width = this.node.width;\n        this.cvs.height = this.node.height - (this.node.height % this.rowH);\n        this.ctx.font = font;\n        this.ctx.fillStyle = fillStyle;\n        this.ctx.lineWidth = this.outlineWidth;\n        this.ctx.strokeStyle = '#' + this.outlineColor.toHEX();\n    }\n\n    private drawToPage(str: string, event: RichEvent) {\n        if (str === '') return;\n        let x = this.cellX;\n        let y = this.cellY - this.fontSize * 0.15 - this.spacingY * 0.5;\n\n        const curOutlineWidth = this.tmpOutLine.width;\n        this.ctx.lineWidth = curOutlineWidth * 2;\n        this.ctx.strokeStyle = this.tmpOutLine.color;\n        if (curOutlineWidth > 0) {\n            this.ctx.strokeText(str, x, y);\n        }\n        this.ctx.fillText(str, x, y);\n\n        const realWidth = this.ctx.measureText(str).width;\n        //添加事件区域\n        if (event) {\n            let rect = cc.rect(x, -this.cellY, realWidth, this.tmpSZFont);\n            this.addEventRect(rect, event);\n        }\n        //显示外框，调试用\n        //this.ctx.strokeRect(x, this.cellY - this.rowH, realWidth, this.rowH);\n        switch (this.style) {\n            case 'd':\n                this.ctx.lineWidth = Math.max(this.fontSize >> 3, this.outlineWidth);\n                this.ctx.beginPath();\n                this.ctx.moveTo(x, y - this.fontSize / 2 + this.ctx.lineWidth);\n                this.ctx.lineTo(x + realWidth, y - this.fontSize / 2 + this.ctx.lineWidth);\n                this.ctx.stroke();\n                this.ctx.lineWidth = curOutlineWidth;\n                break;\n            case 'u':\n                this.ctx.lineWidth = Math.max(this.fontSize >> 3, this.outlineWidth);\n                this.ctx.strokeStyle = this.ctx.fillStyle;\n                this.ctx.beginPath();\n                this.ctx.moveTo(x, y + this.ctx.lineWidth * 2);\n                this.ctx.lineTo(x + realWidth, y + this.ctx.lineWidth * 2);\n                this.ctx.stroke();\n                this.ctx.lineWidth = curOutlineWidth;\n                this.ctx.strokeStyle = this.tmpOutLine.color;\n                break;\n        }\n    }\n\n    private pageToNode() {\n        if (!this.cvs || !this.pageNode) throw new Error('cvs or pageNode is null');\n        // 修正高度\n        this.node.height = this.cellY\n        // 修正宽度\n        const rowCount = this.cellY / this.rowH;\n        this.node.width = rowCount > 1 ? this.maxWidth : this.rowW\n\n        const texture = new cc.Texture2D();\n        texture.initWithElement(this.cvs);\n        let sprite = this.pageNode.getComponent(cc.Sprite)\n        if (!sprite) {\n            sprite = this.pageNode.addComponent(cc.Sprite)\n        }\n        sprite.spriteFrame = new cc.SpriteFrame(texture, cc.rect(0, 0, this.cvs.width, this.cvs.height));\n        this.pageNode.width = this.node.width;\n        this.pageNode.height = this.node.height;\n        this.pageNode.anchorX = 0;\n        this.pageNode.anchorY = 1;\n        this.pageNode.x = -this.node.width * this.node.anchorX\n        this.pageNode.y = this.node.height * (1 - this.node.anchorY)\n        this.pageNode.setParent(this.node);\n\n        this.pageNode.on(cc.Node.EventType.TOUCH_END, this.onPageNodeTouchEnd, this)\n    }\n\n    private addRow(isForce: boolean = false) {\n        this.rowH = this.fontSize + this.spacingY;\n        if (isForce || this.maxWidth > 0) {\n            this.cellX = 0;\n            this.rowW = 0;\n            this.cellY += this.rowH\n        }\n    }\n\n    //点击事件\n    private onPageNodeTouchEnd(event: cc.Event.EventTouch) {\n        if (!this.eventRect) {\n            return;\n        }\n        let curPosW = event.getLocation();\n        let curPosL = this.pageNode.convertToNodeSpaceAR(curPosW);\n        let arrEvts: RichEvent[] = [];\n        this.eventRect.forEach((v, k) => {\n            if (k.contains(curPosL)) {\n                arrEvts.push(v);\n            }\n        })\n        if (arrEvts.length <= 0) {\n            return;\n        }\n        for (let oneEvt of arrEvts) {\n            cc.log('RichTextPro click:', oneEvt.click, oneEvt.param)\n            for (let oneHandl of this.eventHandlers) {\n                oneHandl.emit([oneEvt.click, oneEvt.param]);\n            }\n        }\n    }\n\n    /** 快捷设置事件 */\n    public quickSetClickHnadler(ower: cc.Component, handlerName: string) {\n        let handler = new cc.Component.EventHandler();\n        handler.target = ower.node;\n        handler.component = c2f.utils.view.getComponentName(ower);\n        handler.handler = handlerName;\n        handler.customEventData = \"\";\n        this.eventHandlers = [handler];\n    }\n\n    protected onDestroy() {\n        this.node.destroyAllChildren();\n        this.node.targetOff(this);\n        this.cvs = null;\n        this.ctx = null;\n        this.pageNode = null;\n        if (this.dymicFrame) {\n            this.dymicFrame.clear();\n            this.dymicFrame = null;\n        }\n        if (this.eventRect) {\n            this.eventRect.clear();\n            this.eventRect = null;\n        }\n    }\n}"]}