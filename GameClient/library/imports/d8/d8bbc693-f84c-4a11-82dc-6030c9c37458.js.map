{"version":3,"sources":["assets/c2f-framework/gui/layer/LayerManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { GUI } from \"../GUI\";\nimport { LayerType, UICallbacks, UIConfig, ViewConfig } from \"../../define/C2FUIDef\";\nimport { DelegateComponent } from \"./DelegateComponent\";\nimport { LayerDialog } from \"./LayerDialog\";\nimport { LayerNotify } from \"./LayerNotify\";\nimport { LayerPopUp } from \"./LayerPopup\";\nimport { LayerUI } from \"./LayerUI\";\nimport { UIMap } from \"./UIMap\";\nimport { LayerEffect } from \"./LayerEffect\";\nimport { TouchEffect } from \"../view/TouchEffect\";\n\nexport class LayerManager {\n    /** 界面根节点 */\n    root!: cc.Node;\n    /** 界面摄像机 */\n    camera!: cc.Camera;\n    /** 游戏界面特效层 */\n    game!: cc.Node;\n    /** 界面地图 */\n    uiMap!: UIMap;\n\n    /** 界面层·弹出型 */\n    private ui!: LayerUI;\n    /** 弹窗层·弹出型 */\n    private popup!: LayerPopUp;\n    /** 只能弹出一个的弹窗·弹出型 */\n    private dialog!: LayerDialog;\n    /** 游戏系统提示弹窗  */\n    private system!: LayerDialog;\n    /** 消息提示控制器，请使用show方法来显示 */\n    private notify!: LayerNotify;\n    /** 新手引导层 */\n    private guide!: LayerUI;\n\n    /** UI配置 */\n    private uiCfgs: ViewConfig = {};\n    /** 游戏字体 */\n    private _gameFont: cc.Font;\n    public get gameFont(): cc.Font {\n        return this._gameFont;\n    }\n    public set gameFont(v: cc.Font) {\n        this._gameFont = v;\n    }\n\n    /** 是否为竖屏显示 */\n    get portrait() {\n        return this.root.getComponent(GUI)!.portrait;\n    }\n\n    /**\n     * 构造函数\n     * @param root  界面根节点\n     */\n    constructor() {\n    }\n\n    private createNode(name: string) {\n        let node = new cc.Node(name);\n        let w: cc.Widget = node.addComponent(cc.Widget);\n        w.isAlignLeft = w.isAlignRight = w.isAlignTop = w.isAlignBottom = true;\n        w.left = w.right = w.top = w.bottom = 0;\n        w.alignMode = cc.Widget.AlignMode.ON_WINDOW_RESIZE;\n        w.enabled = true;\n        return node;\n    }\n\n    public init(root: cc.Node) {\n        this.root = root;\n        this.camera = this.root.parent.getChildByName('Camera').getComponent(cc.Camera)!;\n\n        this.game = this.createNode(LayerType.Game);\n        this.ui = new LayerUI(LayerType.UI);\n        this.popup = new LayerPopUp(LayerType.PopUp);\n        this.dialog = new LayerDialog(LayerType.Dialog);\n        this.system = new LayerDialog(LayerType.System);\n        this.notify = new LayerNotify(LayerType.Notify);\n        this.guide = new LayerUI(LayerType.Guide);\n        root.addChild(this.game);\n        root.addChild(this.ui);\n        root.addChild(this.popup);\n        root.addChild(this.dialog);\n        root.addChild(this.system);\n        root.addChild(this.notify);\n        root.addChild(this.guide);\n    }\n\n    /**\n     * 初始化所有UI的配置对象\n     * @param configs 配置对象\n     */\n    public addViewList(list: ViewConfig): void {\n        if (!this.uiCfgs) {\n            this.uiCfgs = {};\n        }\n        if (Object.keys(this.uiCfgs).length <= 0) {\n            this.uiCfgs = list;\n        } else {\n            for (let key in list) {\n                this.uiCfgs[key] = list[key];\n            }\n        }\n    }\n\n    /**\n     * 添加水波纹特效\n     */\n    public addWaterWaveEfx(dur: number) {\n        // this.touchEfx.addWaterWaveEfx(dur);\n    }\n\n    /**\n     * 渐隐飘过提示\n     * @param content 文本表示\n     * @param useI18n 是否使用多语言\n     * @example \n     * c2f.gui.notifyTxt(\"提示内容\");\n     */\n    public notifyTxt(content: string, useI18n: boolean = true) {\n        this.notify.notifyTxt(content, useI18n)\n    }\n\n    /**\n    * 显示加载界面\n    * @param tips 文本提示\n    * @example \n    * c2f.gui.loading(\"提示内容\");\n    */\n    public showLoading(tips: string = '') {\n        this.notify.showLoading(tips);\n    }\n\n    /**\n    * 隐藏加载界面\n    * @param clean 是否清空\n    * @example \n    * c2f.gui.loading(\"提示内容\");\n    */\n    public hideLoading(clean: boolean = false) {\n        this.notify.hideLoading(clean);\n    }\n\n    /**\n     * 弹出自定义UI\n     * @param node 目标节点\n     */\n    public popNotifyNode(node: cc.Node) {\n        this.notify.addChild(node);\n    }\n\n    /**\n     * 设置界面配置\n     * @param uiId   要设置的界面id\n     * @param config 要设置的配置\n     */\n    public setConfig(uiId: number, config: UIConfig): void {\n        this.uiCfgs[uiId] = config;\n    }\n\n    /**\n     * 设置界面地图配置\n     * @param data 界面地图数据\n     */\n    public setUIMap(data: any) {\n        if (this.uiMap == null) {\n            this.uiMap = new UIMap();\n        }\n        this.uiMap.init(data);\n    }\n\n    /** 设置顶部节点 */\n    public setPlayerTopPanel<T extends cc.Node>(panel: T) {\n        this.ui.setTopPanel(panel);\n    }\n\n    /**\n     * 同步打开一个窗口\n     * @param uiId          窗口唯一编号\n     * @param uiArgs        窗口参数\n     * @param callbacks     回调对象\n     * @example\n    var uic: UICallbacks = {\n        onUIAdded: (node: Node, params: any) => {\n            var comp = node.getComponent(LoadingViewComp) as ecs.Comp;\n        }\n        onUIRemoved:(node: Node | null, params: any) => {\n                    \n        }\n    };\n    c2f.gui.open(UIID.Loading, null, uic);\n     */\n    public open(uiId: number, uiArgs: any = null, callbacks?: UICallbacks): void {\n        const config = this.uiCfgs[uiId];\n        if (config == null) {\n            cc.warn(`打开编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n\n        switch (config.layer) {\n            case LayerType.UI:\n            case LayerType.PopUp:\n                this.ui.add(config, uiArgs, callbacks);\n                break;\n            case LayerType.Dialog:\n                this.dialog.add(config, uiArgs, callbacks);\n                break;\n            case LayerType.System:\n                this.system.add(config, uiArgs, callbacks);\n                break;\n            case LayerType.Guide:\n                this.guide.add(config, uiArgs, callbacks);\n                break;\n            case LayerType.Notify:\n                this.notify.add(config, uiArgs, callbacks);\n                break;\n        }\n    }\n\n    /**\n     * 异步打开一个窗口\n     * @param uiId          窗口唯一编号\n     * @param uiArgs        窗口参数\n     * @example \n     * var node = await c2f.gui.openAsync(UIID.Loading);\n     */\n    async openAsync(uiId: number, uiArgs: any = null): Promise<cc.Node | null> {\n        return new Promise<cc.Node | null>((resolve, reject) => {\n            var callbacks: UICallbacks = {\n                onUIAdded: (node: cc.Node, params: any) => {\n                    resolve(node)\n                }\n            };\n            this.open(uiId, uiArgs, callbacks);\n        });\n    }\n\n    /**\n     * 缓存中是否存在指定标识的窗口\n     * @param uiId 窗口唯一标识\n     * @example\n     * c2f.gui.has(UIID.Loading);\n     */\n    public has(uiId: number): boolean {\n        var config = this.uiCfgs[uiId];\n        if (config == null) {\n            cc.warn(`编号为【${uiId}】的界面失败，配置信息不存在`);\n            return false;\n        }\n\n        var result = false;\n        switch (config.layer) {\n            case LayerType.UI:\n            case LayerType.PopUp:\n                result = this.ui.has(config.prefab);\n                break;\n            case LayerType.Dialog:\n                result = this.dialog.has(config.prefab);\n                break;\n            case LayerType.System:\n                result = this.system.has(config.prefab);\n                break;\n            case LayerType.Guide:\n                result = this.guide.has(config.prefab);\n                break;\n        }\n        return result;\n    }\n\n    /**\n     *  根据预制件路径获取当前显示的该预制件的所有Node节点数组\n     * @param uiId 窗口唯一标识\n     * @example\n     * c2f.gui.get(UIID.Loading);\n     */\n    public get(uiId: number): Array<cc.Node> {\n        const config = this.uiCfgs[uiId];\n        if (config == null) {\n            cc.warn(`编号为【${uiId}】的界面失败，配置信息不存在`);\n            return [];\n        }\n        let result: Array<cc.Node> = [];\n        switch (config.layer) {\n            case LayerType.UI:\n            case LayerType.PopUp:\n                result = this.ui.get(config.prefab);\n                break;\n            case LayerType.Dialog:\n                result = this.dialog.get(config.prefab);\n                break;\n            case LayerType.System:\n                result = this.system.get(config.prefab);\n                break;\n            case LayerType.Guide:\n                result = this.guide.get(config.prefab);\n                break;\n            case LayerType.Notify:\n                result = this.notify.get(config.prefab);\n                break;\n        }\n        if (!result || result.length <= 0) {\n            cc.warn(\"don't find target layer!\")\n            // let viewComp = UIID[uiId];\n            // let dstComp = this.ui.getComponentInChildren(viewComp);\n            // if (dstComp) {\n            //     result.push(dstComp.node);\n            // }\n        }\n        return result;\n    }\n\n    /** 获取窗口参数 */\n    public getViewParam(uiId: number) {\n        const config = this.uiCfgs[uiId];\n        if (config == null) {\n            cc.warn(`编号为【${uiId}】的界面失败，配置信息不存在`);\n            return null;\n        }\n        let viewParams = null;\n        switch (config.layer) {\n            case LayerType.UI:\n            case LayerType.PopUp:\n                viewParams = this.ui.getViewParam(config);\n                break;\n            case LayerType.Dialog:\n                viewParams = this.dialog.getViewParam(config);\n                break;\n            case LayerType.System:\n                viewParams = this.system.getViewParam(config);\n                break;\n            case LayerType.Guide:\n                viewParams = this.guide.getViewParam(config);\n                break;\n            case LayerType.Notify:\n                viewParams = this.guide.getViewParam(config);\n                break;\n        }\n        return viewParams;\n    }\n\n    /**\n     * 移除指定标识的窗口\n     * @param uiId         窗口唯一标识\n     * @param isDestroy    移除后是否释放\n     * @example\n     * c2f.gui.remove(UIID.Loading);\n     */\n    public remove(uiId: number, isDestroy: boolean = true) {\n        const config = this.uiCfgs[uiId];\n        if (config == null) {\n            cc.warn(`删除编号为【${uiId}】的界面失败，配置信息不存在`);\n            return;\n        }\n\n        switch (config.layer) {\n            case LayerType.UI:\n            case LayerType.PopUp:\n                this.ui.remove(config.prefab, isDestroy);\n                break;\n            case LayerType.Dialog:\n                this.dialog.remove(config.prefab, isDestroy);\n                break;\n            case LayerType.System:\n                this.system.remove(config.prefab, isDestroy);\n                break;\n            case LayerType.Guide:\n                this.guide.remove(config.prefab, isDestroy);\n                break;\n        }\n    }\n\n    /**\n     * 删除一个通过this框架添加进来的节点\n     * @param node          窗口节点\n     * @param isDestroy     移除后是否释放\n     * @example\n     * c2f.gui.removeByNode(cc.Node);\n     */\n    public removeByNode(node: cc.Node, isDestroy: boolean = true) {\n        let allLayer = [this.ui, this.popup, this.dialog, this.system, this.guide];\n\n        let removeObj: { layer: LayerUI, prefab: string } = null;\n        for (let one of allLayer) {\n            let url = one.getPrefabUrlByNode(node);\n            if (url && url.length > 0) {\n                removeObj = { layer: one, prefab: url };\n                break;\n            }\n        }\n        if (removeObj) {\n            removeObj.layer.remove(removeObj.prefab, isDestroy);\n        } else {\n            c2f.log.logBusiness(\"gui.removeByNode don't find target node!! name:\", node.name);\n            if (node instanceof cc.Node) {\n                let comp = node.getComponent(DelegateComponent);\n                if (comp && comp.viewParams) {\n                    // @ts-ignore 注：不对外使用\n                    (node.parent as LayerUI).removeByUuid(comp.viewParams.uuid, isDestroy);\n                }\n                else {\n                    cc.warn(`当前删除的node不是通过界面管理器添加到舞台上`);\n                    node.destroy();\n                }\n            }\n        }\n    }\n\n    /** 关闭uiId之上的所有界面 */\n    public removeAllAboveUI(uiId: number) {\n        const config = this.uiCfgs[uiId];\n        if (!config) {\n            return;\n        }\n        if (config.layer != LayerType.UI && config.layer != LayerType.PopUp) {\n            return;\n        }\n        let dstUI = this.ui.has(config.prefab);\n        if (!dstUI) {\n            return;\n        }\n        this.ui.removeAboveUI(config.prefab);\n    }\n\n    /**\n     * 异步等待弹窗关闭（只等待遍历到的第一个）\n     * @param url prefab路径，规则同Res加载路径\n     */\n    public async waitCloseLayer(uiId: number): Promise<void> {\n        let viewPa = this.getViewParam(uiId);\n        if (!viewPa) {\n            return;\n        }\n        return await new Promise((resolve, reject) => {\n            if (viewPa.callbacks.onUIRemoved) {\n                let oriRemoveCb = viewPa.callbacks.onUIRemoved;\n                viewPa.callbacks.onUIRemoved = (...args: any[]) => {\n                    oriRemoveCb(...args);\n                    resolve();\n                }\n            } else {\n                viewPa.callbacks.onUIRemoved = resolve;\n            }\n        });\n    }\n\n    /**\n     * 清除所有窗口\n     * @param isDestroy 移除后是否释放\n     * @param excludeId 排除预制体\n     * @example\n     * c2f.gui.clear();\n     */\n    public clear(isDestroy: boolean = false, excludeId: number[] = []) {\n        let excludePrefab: string[] = [];\n        if (excludeId && excludeId.length > 0) {\n            for (let one of excludeId) {\n                const config: UIConfig = this.uiCfgs[one];\n                excludePrefab.push(config.prefab)\n            }\n        }\n        this.ui.clearUI(isDestroy, excludePrefab);\n        this.popup.clearUI(isDestroy, excludePrefab);\n        this.dialog.clearUI(isDestroy, excludePrefab);\n        this.system.clearUI(isDestroy, excludePrefab);\n        this.notify.clearUI(isDestroy, excludePrefab);\n        this.guide.clearUI(isDestroy, excludePrefab);\n    }\n\n    /** 获得最上层窗口 */\n    public getTopsideView() {\n        let topside: cc.Node = null;\n        let arrPanel: LayerUI[] = [this.system, this.dialog, this.ui];\n        for (let one of arrPanel) {\n            let top = one.getTopsideView();\n            if (top) {\n                topside = top;\n                break;\n            }\n        }\n        return topside;\n    }\n\n    public hideAnimaPlayingView() {\n        this.ui.hideAnimaPlayingView();\n    }\n\n    public showAnimaPlayingView() {\n        this.ui.showAnimaPlayingView();\n    }\n\n    public lockScreen(duration: number = 0) {\n        let scene = cc.director.getScene();\n        let lockScreen = scene.getChildByName(\"lockScreen\");\n        if (!lockScreen) {\n            lockScreen = new cc.Node();\n            let comp = lockScreen.addComponent(cc.BlockInputEvents);\n            lockScreen.parent = scene;\n            lockScreen.zIndex = 10000;\n            lockScreen.width = cc.winSize.width;\n            lockScreen.height = cc.winSize.height;\n            lockScreen.x = cc.winSize.width * 0.5;\n            lockScreen.y = cc.winSize.height * 0.5;\n            lockScreen.name = \"lockScreen\";\n\n            if (duration) {\n                comp.scheduleOnce(() => {\n                    this.unlockScreen();\n                }, duration);\n            }\n        }\n    }\n\n    public unlockScreen() {\n        let scene = cc.director.getScene();\n        let lockScreen = scene.getChildByName(\"lockScreen\");\n        if (lockScreen) {\n            lockScreen.getComponent(cc.BlockInputEvents).unscheduleAllCallbacks();\n            lockScreen.destroy();\n            lockScreen = undefined;\n        }\n    }\n\n    public autoSize() {\n        this.root.getComponent(GUI).autoSize();\n    }\n\n    public fixedWidth() {\n        this.root.getComponent(GUI).fixedWidth();\n    }\n\n    /** 静态成员 */\n    private static _instance: LayerManager = null\n    public static getInstance(): LayerManager {\n        if (!this._instance) {\n            this._instance = new LayerManager();\n        }\n        return this._instance;\n    }\n}\n\ndeclare global {\n    interface IC2F {\n        gui: LayerManager;\n    }\n}\n\nc2f.gui = LayerManager.getInstance();\nexport { };"]}