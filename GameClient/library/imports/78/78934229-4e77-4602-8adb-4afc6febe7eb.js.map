{"version":3,"sources":["assets/c2f-framework/libs/html/htmlTextParser.js"],"names":["eventRegx","imageAttrReg","prefabRegx","HtmlTextParser","_parsedObject","_specialSymbolArray","push","prototype","constructor","parse","htmlString","_resultObjectArray","_stack","startIndex","length","tagEndIndex","indexOf","tagBeginIndex","lastIndexOf","noTagBegin","pop","_processResult","substring","newStr","tagStr","charAt","_addToStack","_attributeToObject","attribute","trim","obj","header","match","tagName","nextSpace","eventObj","eventHanlderString","color","size","parseInt","_processEventHandler","event","startsWith","isNewLine","text","style","newline","tagValue","remainingArgument","isValidPrefab","substr","replace","toLocaleLowerCase","endsWith","slice","charCodeAt","isPrefab","idx","Number","param","isValidImageTag","isImage","src","imageHeight","imageWidth","imageAlign","imageOffset","isImgFile","defaultOutlineObject","width","outlineAttrReg","outline","underline","italic","bold","eventString","index","eventNames","isValidTag","eventName","eventValue","previousTagObj","key","value","_escapeSpecialSymbol","str","i","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["/****************************************************************************\n Copyright (c) 2013-2016 Chukong Technologies Inc.\n Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.\n\n https://www.cocos.com/\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated engine source code (the \"Software\"), a limited,\n worldwide, royalty-free, non-assignable, revocable and non-exclusive license\n to use Cocos Creator solely to develop games on your target platforms. You shall\n not use Cocos Creator software for developing other software or tools that's\n used for developing games. You are not granted to publish, distribute,\n sublicense, and/or sell copies of Cocos Creator.\n\n The software or tools in this License Agreement are licensed, not sold.\n Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\nvar eventRegx = /^(click)(\\s)*=|(param)(\\s)*=/;\nvar imageAttrReg = /(\\s)*src(\\s)*=|(\\s)*height(\\s)*=|(\\s)*width(\\s)*=|(\\s)*align(\\s)*=|(\\s)*offset(\\s)*=|(\\s)*click(\\s)*=|(\\s)*param(\\s)*=/;\nvar prefabRegx = /(\\s)*idx(\\s)*=|(\\s)*click(\\s)*=|(\\s)*param(\\s)*=/;\n/**\n * A utils class for parsing HTML texts. The parsed results will be an object array.\n */\nvar HtmlTextParser = function () {\n    this._parsedObject = {};\n    this._specialSymbolArray = [];\n    this._specialSymbolArray.push([/&lt;/g, '<']);\n    this._specialSymbolArray.push([/&gt;/g, '>']);\n    this._specialSymbolArray.push([/&amp;/g, '&']);\n    this._specialSymbolArray.push([/&quot;/g, '\"']);\n    this._specialSymbolArray.push([/&apos;/g, '\\'']);\n    this._specialSymbolArray.push([/&nbsp;/g, ' ']);\n};\n\nHtmlTextParser.prototype = {\n    constructor: HtmlTextParser,\n    parse: function (htmlString) {\n        this._resultObjectArray = [];\n        if (!htmlString) {\n            return this._resultObjectArray;\n        }\n        this._stack = [];\n\n        var startIndex = 0;\n        var length = htmlString.length;\n        while (startIndex < length) {\n            var tagEndIndex = htmlString.indexOf('>', startIndex);\n            var tagBeginIndex = -1;\n            if (tagEndIndex >= 0) {\n                tagBeginIndex = htmlString.lastIndexOf('<', tagEndIndex);\n                var noTagBegin = tagBeginIndex < (startIndex - 1);\n\n                if (noTagBegin) {\n                    tagBeginIndex = htmlString.indexOf('<', tagEndIndex + 1);\n                    tagEndIndex = htmlString.indexOf('>', tagBeginIndex + 1);\n                }\n            }\n\n            if (tagBeginIndex < 0) {\n                this._stack.pop();\n                this._processResult(htmlString.substring(startIndex));\n                startIndex = length;\n            } else {\n                var newStr = htmlString.substring(startIndex, tagBeginIndex);\n                var tagStr = htmlString.substring(tagBeginIndex + 1, tagEndIndex);\n                if (tagStr === \"\") newStr = htmlString.substring(startIndex, tagEndIndex + 1);\n                this._processResult(newStr);\n                if (tagEndIndex === -1) {\n                    // cc.error('The HTML tag is invalid!');\n                    tagEndIndex = tagBeginIndex;\n                } else if (htmlString.charAt(tagBeginIndex + 1) === '\\/') {\n                    this._stack.pop();\n                } else {\n                    this._addToStack(tagStr);\n                }\n                startIndex = tagEndIndex + 1;\n            }\n        }\n\n\n        return this._resultObjectArray;\n    },\n\n    _attributeToObject: function (attribute) {\n        attribute = attribute.trim();\n\n        var obj = {};\n        var header = attribute.match(/^(color|size)(\\s)*=/);\n        var tagName;\n        var nextSpace;\n        var eventObj;\n        var eventHanlderString;\n        if (header) {\n            tagName = header[0];\n            attribute = attribute.substring(tagName.length).trim();\n            if (attribute === \"\") return obj;\n\n            //parse color\n            nextSpace = attribute.indexOf(' ');\n            switch (tagName[0]) {\n                case 'c':\n                    if (nextSpace > -1) {\n                        obj.color = attribute.substring(0, nextSpace).trim();\n                    } else {\n                        obj.color = attribute;\n                    }\n                    break;\n                case 's':\n                    obj.size = parseInt(attribute);\n                    break;\n            }\n\n            //tag has event arguments\n            if (nextSpace > -1) {\n                eventHanlderString = attribute.substring(nextSpace + 1).trim();\n                eventObj = this._processEventHandler(eventHanlderString);\n                obj.event = eventObj;\n            }\n            return obj;\n        }\n\n        header = attribute.match(/^(br(\\s)*\\/)/);\n        if (header && header[0].length > 0) {\n            tagName = header[0].trim();\n            if (tagName.startsWith(\"br\") && tagName[tagName.length - 1] === \"/\") {\n                obj.isNewLine = true;\n                this._resultObjectArray.push({ text: \"\", style: { newline: true } });\n                return obj;\n            }\n        }\n\n        //预制体\n        header = attribute.match(/^(prefab(\\s)*idx(\\s)*=[^>]+\\/)/);\n        if (header && header[0].length > 0) {\n            tagName = header[0].trim();\n            if (tagName.startsWith(\"prefab\") && tagName[tagName.length - 1] === \"/\") {\n                header = attribute.match(prefabRegx);\n                var tagValue;\n                var remainingArgument;\n                var isValidPrefab = false;\n                while (header) {\n                    //skip the invalid tags at first\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\n                    tagName = attribute.substr(0, header[0].length);\n                    //remove space and = character\n                    remainingArgument = attribute.substring(tagName.length).trim();\n                    nextSpace = remainingArgument.indexOf(' ');\n\n                    tagValue = (nextSpace > -1) ? remainingArgument.substr(0, nextSpace) : remainingArgument;\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\n                    tagName = tagName.toLocaleLowerCase();\n\n                    attribute = remainingArgument.substring(nextSpace).trim();\n                    if (tagValue.endsWith('\\/')) tagValue = tagValue.slice(0, -1);\n                    if (tagName === \"idx\") {\n                        switch (tagValue.charCodeAt(0)) {\n                            case 34: // \"\n                            case 39: // '\n                                isValidPrefab = true;\n                                tagValue = tagValue.slice(1, -1);\n                                break;\n                        }\n                        obj.isPrefab = true;\n                        obj.idx = Number(tagValue);\n                    } else if (tagName === \"click\") {\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\n                    }\n                    if (obj.event && tagName === 'param') {\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\n                    }\n                    header = attribute.match(imageAttrReg);\n                }\n                if (isValidPrefab && obj.isPrefab) {\n                    this._resultObjectArray.push({ text: \"\", style: obj });\n                }\n                return {};\n            }\n        }\n\n        //图集中的图片\n        header = attribute.match(/^(img(\\s)*src(\\s)*=[^>]+\\/)/);\n        if (header && header[0].length > 0) {\n            tagName = header[0].trim();\n            if (tagName.startsWith(\"img\") && tagName[tagName.length - 1] === \"/\") {\n                header = attribute.match(imageAttrReg);\n                var tagValue;\n                var remainingArgument;\n                var isValidImageTag = false;\n                while (header) {\n                    //skip the invalid tags at first\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\n                    tagName = attribute.substr(0, header[0].length);\n                    //remove space and = character\n                    remainingArgument = attribute.substring(tagName.length).trim();\n                    nextSpace = remainingArgument.indexOf(' ');\n\n                    tagValue = (nextSpace > -1) ? remainingArgument.substr(0, nextSpace) : remainingArgument;\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\n                    tagName = tagName.toLocaleLowerCase();\n\n                    attribute = remainingArgument.substring(nextSpace).trim();\n                    if (tagValue.endsWith('\\/')) tagValue = tagValue.slice(0, -1);\n                    if (tagName === \"src\") {\n                        switch (tagValue.charCodeAt(0)) {\n                            case 34: // \"\n                            case 39: // '\n                                isValidImageTag = true;\n                                tagValue = tagValue.slice(1, -1);\n                                break;\n                        }\n                        obj.isImage = true;\n                        obj.src = tagValue;\n                    } else if (tagName === \"height\") {\n                        obj.imageHeight = parseInt(tagValue);\n                    } else if (tagName === \"width\") {\n                        obj.imageWidth = parseInt(tagValue);\n                    } else if (tagName === \"align\") {\n                        switch (tagValue.charCodeAt(0)) {\n                            case 34: // \"\n                            case 39: // '\n                                tagValue = tagValue.slice(1, -1);\n                                break;\n                        }\n                        obj.imageAlign = tagValue.toLocaleLowerCase();\n                    } else if (tagName === \"offset\") {\n                        obj.imageOffset = tagValue;\n                    } else if (tagName === \"click\") {\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\n                    }\n\n                    if (obj.event && tagName === 'param') {\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\n                    }\n\n                    header = attribute.match(imageAttrReg);\n                }\n\n                if (isValidImageTag && obj.isImage) {\n                    this._resultObjectArray.push({ text: \"\", style: obj });\n                }\n\n                return {};\n            }\n        }\n\n        //图片文件\n        header = attribute.match(/^(iFile(\\s)*src(\\s)*=[^>]+\\/)/);\n        if (header && header[0].length > 0) {\n            tagName = header[0].trim();\n            if (tagName.startsWith(\"iFile\") && tagName[tagName.length - 1] === \"/\") {\n                header = attribute.match(imageAttrReg);\n                var tagValue;\n                var remainingArgument;\n                var isValidImageTag = false;\n                while (header) {\n                    //skip the invalid tags at first\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\n                    tagName = attribute.substr(0, header[0].length);\n                    //remove space and = character\n                    remainingArgument = attribute.substring(tagName.length).trim();\n                    nextSpace = remainingArgument.indexOf(' ');\n\n                    tagValue = (nextSpace > -1) ? remainingArgument.substr(0, nextSpace) : remainingArgument;\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\n                    tagName = tagName.toLocaleLowerCase();\n\n                    attribute = remainingArgument.substring(nextSpace).trim();\n                    if (tagValue.endsWith('\\/')) tagValue = tagValue.slice(0, -1);\n                    if (tagName === \"src\") {\n                        switch (tagValue.charCodeAt(0)) {\n                            case 34: // \"\n                            case 39: // '\n                                isValidImageTag = true;\n                                tagValue = tagValue.slice(1, -1);\n                                break;\n                        }\n                        obj.isImgFile = true;\n                        obj.src = tagValue;\n                    } else if (tagName === \"height\") {\n                        obj.imageHeight = parseInt(tagValue);\n                    } else if (tagName === \"width\") {\n                        obj.imageWidth = parseInt(tagValue);\n                    } else if (tagName === \"align\") {\n                        switch (tagValue.charCodeAt(0)) {\n                            case 34: // \"\n                            case 39: // '\n                                tagValue = tagValue.slice(1, -1);\n                                break;\n                        }\n                        obj.imageAlign = tagValue.toLocaleLowerCase();\n                    } else if (tagName === \"offset\") {\n                        obj.imageOffset = tagValue;\n                    } else if (tagName === \"click\") {\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\n                    }\n\n                    if (obj.event && tagName === 'param') {\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\n                    }\n\n                    header = attribute.match(imageAttrReg);\n                }\n\n                if (isValidImageTag && obj.isImgFile) {\n                    this._resultObjectArray.push({ text: \"\", style: obj });\n                }\n\n                return {};\n            }\n        }\n\n        header = attribute.match(/^(outline(\\s)*[^>]*)/);\n        if (header) {\n            attribute = header[0].substring(\"outline\".length).trim();\n            var defaultOutlineObject = { color: \"#ffffff\", width: 1 };\n            if (attribute) {\n                var outlineAttrReg = /(\\s)*color(\\s)*=|(\\s)*width(\\s)*=|(\\s)*click(\\s)*=|(\\s)*param(\\s)*=/;\n                header = attribute.match(outlineAttrReg);\n                var tagValue;\n                while (header) {\n                    //skip the invalid tags at first\n                    attribute = attribute.substring(attribute.indexOf(header[0]));\n                    tagName = attribute.substr(0, header[0].length);\n                    //remove space and = character\n                    remainingArgument = attribute.substring(tagName.length).trim();\n                    nextSpace = remainingArgument.indexOf(' ');\n                    if (nextSpace > -1) {\n                        tagValue = remainingArgument.substr(0, nextSpace);\n                    } else {\n                        tagValue = remainingArgument;\n                    }\n                    tagName = tagName.replace(/[^a-zA-Z]/g, \"\").trim();\n                    tagName = tagName.toLocaleLowerCase();\n\n                    attribute = remainingArgument.substring(nextSpace).trim();\n                    if (tagName === \"click\") {\n                        obj.event = this._processEventHandler(tagName + \"=\" + tagValue);\n                    } else if (tagName === \"color\") {\n                        defaultOutlineObject.color = tagValue;\n                    } else if (tagName === \"width\") {\n                        defaultOutlineObject.width = parseInt(tagValue);\n                    }\n\n                    if (obj.event && tagName === 'param') {\n                        obj.event.param = tagValue.replace(/^\\\"|\\\"$/g, '');\n                    }\n\n                    header = attribute.match(outlineAttrReg);\n                }\n            }\n            obj.outline = defaultOutlineObject;\n        }\n\n        header = attribute.match(/^(on|u|b|i)(\\s)*/);\n        if (header && header[0].length > 0) {\n            tagName = header[0];\n            attribute = attribute.substring(tagName.length).trim();\n            switch (tagName[0]) {\n                case 'u':\n                    obj.underline = true;\n                    break;\n                case 'i':\n                    obj.italic = true;\n                    break;\n                case 'b':\n                    obj.bold = true;\n                    break;\n            }\n            if (attribute === \"\") {\n                return obj;\n            }\n            eventObj = this._processEventHandler(attribute);\n            obj.event = eventObj;\n        }\n\n        return obj;\n    },\n\n    _processEventHandler: function (eventString) {\n        var index = 0;\n        var obj = {};\n        var eventNames = eventString.match(eventRegx);\n        var isValidTag = false;\n        while (eventNames) {\n            var eventName = eventNames[0];\n            var eventValue = \"\";\n            isValidTag = false;\n            eventString = eventString.substring(eventName.length).trim();\n            if (eventString.charAt(0) === \"\\\"\") {\n                index = eventString.indexOf(\"\\\"\", 1);\n                if (index > -1) {\n                    eventValue = eventString.substring(1, index).trim();\n                    isValidTag = true;\n                }\n                index++;\n            } else if (eventString.charAt(0) === \"\\'\") {\n                index = eventString.indexOf('\\'', 1);\n                if (index > -1) {\n                    eventValue = eventString.substring(1, index).trim();\n                    isValidTag = true;\n                }\n                index++;\n            } else {\n                //skip the invalid attribute value\n                var match = eventString.match(/(\\S)+/);\n                if (match) {\n                    eventValue = match[0];\n                } else {\n                    eventValue = \"\";\n                }\n                index = eventValue.length;\n            }\n\n            if (isValidTag) {\n                eventName = eventName.substring(0, eventName.length - 1).trim();\n                obj[eventName] = eventValue;\n            }\n\n            eventString = eventString.substring(index).trim();\n            eventNames = eventString.match(eventRegx);\n        }\n\n        return obj;\n    },\n\n    _addToStack: function (attribute) {\n        var obj = this._attributeToObject(attribute);\n\n        if (this._stack.length === 0) {\n            this._stack.push(obj);\n        } else {\n            if (obj.isNewLine || obj.isImage) {\n                return;\n            }\n            //for nested tags\n            var previousTagObj = this._stack[this._stack.length - 1];\n            for (var key in previousTagObj) {\n                if (!(obj[key])) {\n                    obj[key] = previousTagObj[key];\n                }\n            }\n            this._stack.push(obj);\n        }\n    },\n\n    _processResult: function (value) {\n        if (value === \"\") {\n            return;\n        }\n\n        value = this._escapeSpecialSymbol(value);\n        if (this._stack.length > 0) {\n            this._resultObjectArray.push({ text: value, style: this._stack[this._stack.length - 1] });\n        } else {\n            this._resultObjectArray.push({ text: value });\n        }\n    },\n\n    _escapeSpecialSymbol: function (str) {\n        for (var i = 0; i < this._specialSymbolArray.length; ++i) {\n            var key = this._specialSymbolArray[i][0];\n            var value = this._specialSymbolArray[i][1];\n\n            str = str.replace(key, value);\n        }\n        return str;\n    }\n};\n\nmodule.exports = HtmlTextParser;\n"]}