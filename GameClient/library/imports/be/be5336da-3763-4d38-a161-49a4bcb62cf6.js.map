{"version":3,"sources":["assets/c2f-framework/gui/view/TouchEffect.ts"],"names":[],"mappings":";;;;;AAAA,WAAW;;;;;;;;;;;;;;;;;;;;;;AAEL,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C;IAAiC,+BAAY;IAA7C;QAAA,qEAiCC;QA9BW,aAAO,GAA2B,IAAI,CAAC;;IA8BnD,CAAC;IA5Ba,4BAAM,GAAhB;QACI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,cAAc,GAAG,KAAK,CAAC;IACvD,CAAC;IAEO,kCAAY,GAApB,UAAqB,KAAK;QACtB,IAAM,MAAM,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,EAAE;YACrD,OAAO;SACV;QACD,IAAI,UAAU,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACrC,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;QAC3D,IAAI,MAAM,GAAG,IAAI,EAAE,CAAC,IAAI,EAAE,CAAA;QAC1B,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,CAAA;QAC7B,MAAM,CAAC,KAAK,GAAG,CAAC,CAAA;QAChB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC;QACnC,IAAI,QAAQ,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAA;QAC/C,QAAQ,CAAC,kBAAkB,GAAG,KAAK,CAAA;QACnC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;QAC5B,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAA;QAC3E,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;QAE1B,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC;QACrC,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;QACxC,QAAQ,CAAC,mBAAmB,CAAC,UAAU,IAAI;YACvC,MAAM,CAAC,OAAO,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACP,CAAC;IA7BD;QADC,QAAQ,CAAC,EAAE,CAAC,YAAY,CAAC;gDACqB;IAHtC,WAAW;QADvB,OAAO;OACK,WAAW,CAiCvB;IAAD,kBAAC;CAjCD,AAiCC,CAjCgC,EAAE,CAAC,SAAS,GAiC5C;AAjCY,kCAAW","file":"","sourceRoot":"/","sourcesContent":["/** 点击特效 */\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport class TouchEffect extends cc.Component {\n\n    @property(sp.SkeletonData)\n    private spEfxDt: sp.SkeletonData | null = null;\n\n    protected onLoad(): void {\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\n        this.node['_touchListener'].swallowTouches = false;\n    }\n\n    private onTouchStart(event) {\n        const maxCnt = 5;\n        if (!this.spEfxDt || this.node.children.length > maxCnt) {\n            return;\n        }\n        let worldPoint = event.getLocation();\n        let posInNode = this.node.convertToNodeSpaceAR(worldPoint);\n        let spNode = new cc.Node()\n        spNode.setPosition(posInNode)\n        spNode.scale = 1\n        spNode.angle = Math.random() * 360;\n        let newSpine = spNode.addComponent(sp.Skeleton)\n        newSpine.premultipliedAlpha = false\n        newSpine.enableBatch = true;\n        newSpine.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.SHARED_CACHE)\n        spNode.parent = this.node;\n\n        newSpine.skeletonData = this.spEfxDt;\n        newSpine.setAnimation(0, \"idle\", false);\n        newSpine.setCompleteListener(function (data) {\n            spNode.destroy();\n        });\n    }\n}"]}