{"version":3,"sources":["assets/c2f-framework/component/animation/MoveSelf.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property, menu } = cc._decorator;\n@ccclass\n@menu('c2f/animation/MoveSelf')\nexport class MoveSelf extends cc.Component {\n\n    @property({ tooltip: \"移动速度\" })\n    private speed: cc.Vec2 = cc.v2(0, 0);\n\n    @property({ serializable: true, tooltip: \"自动播放\" })\n    private playOnLoad: boolean = true;\n\n    //播放\n    private isPlaying: boolean = false;\n\n    protected start(): void {\n        if (this.playOnLoad) {\n            this.scheduleOnce(() => {\n                this.isPlaying = true;\n            })\n        }\n    }\n\n    public startPlay() {\n        this.isPlaying = true;\n    }\n\n\n    protected update(dt: number): void {\n        if (!this.isPlaying) {\n            return;\n        }\n\n        let beMoveX = this.speed.x != 0;\n        let beMoveY = this.speed.y != 0;\n        if (beMoveX) {\n            this.node.x += this.speed.x * dt;\n        }\n        if (beMoveY) {\n            this.node.y += this.speed.y * dt;\n        }\n        const panel = this.node.parent;\n        if (beMoveX) {\n            if (this.node.x < 0) {\n                let rightX = this.node.x + this.node.width * (1 - this.node.anchorX) * this.node.scaleX;\n                if (rightX < 0) {\n                    this.node.x = panel.width * (1 - panel.anchorX) + this.node.width * this.node.anchorX * this.node.scaleX;\n                }\n            }\n            if (this.node.x > panel.width) {\n                let leftX = this.node.x - this.node.width * this.node.anchorX * this.node.scaleX;\n                if (leftX > panel.width) {\n                    this.node.x = -panel.width * panel.anchorX - this.node.width * (1 - this.node.anchorX) * this.node.scaleX;\n                }\n            }\n        }\n        if (beMoveY) {\n            if (this.node.y < 0) {\n                let topY = this.node.y + this.node.height * (1 - this.node.anchorY) * this.node.scaleY;\n                if (topY < 0) {\n                    this.node.y = panel.height * (1 - panel.anchorY) + this.node.height * this.node.anchorY * this.node.scaleY;\n                }\n            }\n            if (this.node.y > panel.height) {\n                let botY = this.node.y - this.node.height * this.node.anchorY * this.node.scaleY;\n                if (botY > panel.height) {\n                    this.node.y = -panel.height * panel.anchorY - this.node.height * (1 - this.node.anchorY) * this.node.scaleY;\n                }\n            }\n        }\n    }\n}"]}